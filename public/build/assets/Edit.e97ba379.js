import{az as q,aA as G,d as J,H as O,i as E,aB as R,ac as V,r as c,o as p,c as m,b as o,w as n,a as d,p as s,t as l,h as Q,F as K,q as W,m as k,v as g,n as X,g as b,J as Y,S as Z,f as j}from"./app.17cd73cb.js";import{b as x,f as ee,d as te}from"./PsLayout.dfd88468.js";import{u as oe}from"./Validators.52e283a4.js";import{P as re}from"./PsInput.1d284888.js";import{P as ne}from"./PsLabel.22ffb702.js";import{P as le}from"./PsButton.e57c4d7d.js";import{P as se}from"./PsCard.ad8f8108.js";import{P as ae}from"./PsIcon.05949a2a.js";import{P as ie}from"./PsTextarea.a073ad3a.js";import{P as de}from"./PsLoading.6ac4d83e.js";import{P as ue}from"./PsCheckboxValue.e5e75bc0.js";import{a as pe,P as ye}from"./PsActionModal.f014cce2.js";import{P as me}from"./PsBreadcrumb2.49a3f56a.js";import{P as ce}from"./PsLabelCaption.88f9aeab.js";import{_ as ve}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsModal.bee9bcb9.js";import"./PsInputWithRightIcon.1f31b4ee.js";import"./PsModal.8d00ec01.js";import"./PsLabelHeader4.58b3b4f9.js";import"./PsIcon1.1b6f6944.js";import"./PsDraggable.e6494ff8.js";const be=q(()=>G(()=>import("./GoogleMapPinPicker.58b9f2fc.js"),["assets/GoogleMapPinPicker.58b9f2fc.js","assets/index.0117fec4.js","assets/app.17cd73cb.js","assets/app.3d908103.css","assets/plugin-vue_export-helper.21dcd24c.js"])),ke=J({name:"Edit",components:{Head:O,GoogleMapPinPicker:be,PsInput:re,PsLabel:ne,PsButton:le,PsLabelHeader6:x,PsCard:se,PsTextarea:ie,PsIcon:ae,PsLoading:de,PsCheckboxValue:ue,PsActionModal:pe,PsImageIconModal:ye,PsDangerDialog:ee,PsBreadcrumb2:me,PsLabelCaption:ce},layout:te,props:["errors","city","customizeHeaders","customizeDetails","coreFieldFilterSettings"],setup(e){const i=E(!1),$=E(!1),_=E(),B=E(),F=E(),{isEmpty:f,minLength:I,isLatitude:z,isLongitude:y,isNum:C}=oe(),v=(a,u)=>{e.errors[a]=u?I(a,u,3):f(a,u),a=="name"&&(_.value.isError=e.errors.name!="")},U=(a,u)=>{e.errors[a]=u?z(a,u):f(a,u),a=="lat"&&(B.value.isError=e.errors.lat!="")},S=(a,u)=>{e.errors[a]=u?y(a,u):f(a,u),a=="lng"&&(F.value.isError=e.errors.lng!="")},H=(a,u,P="")=>{e.errors[a]=u?"":f(a,u,P)},T=(a,u,P="",h="")=>{e.errors[a]=u?C(a,u,h):f(a,u,P)},M=a=>{let u=a.keyCode?a.keyCode:a.which;(u<48||u>57)&&a.preventDefault()},L=a=>{let u=a.keyCode?a.keyCode:a.which;(u<48||u>57)&&u!==46&&u!==45&&a.preventDefault()};let w=R({id:e.city.id,name:e.city.name,ordering:e.city.ordering,lat:e.city.lat,lng:e.city.lng,description:e.city.description,ordering:e.city.ordering,city_relation:{},_method:"put"});function A(a){this.$inertia.post(route("city.update",a),w,{forceFormData:!0,onBefore:()=>{i.value=!0},onSuccess:()=>{i.value=!1,$.value=!0,setTimeout(()=>{this.$inertia.get(route("city.index"))},500)},onError:()=>{i.value=!1,_.value.isError=e.errors.name!="",B.value.isError=e.errors.lat!="",F.value.isError=e.errors.lng!=""}})}function D(a){w.lat=a.latLng.lat(),w.lng=a.latLng.lng()}return{validateLocationNameInput:v,validateLatitudeInput:U,validateLongitudeInput:S,form:w,loading:i,success:$,handleSubmit:A,updateCoordinates:D,validateEmptyInput:H,validateNumberInput:T,onlyNumber:M,onlyNumberWithCustom:L,name:_,lat:B,lng:F}},created(){this.customizeHeaders.map((e,i)=>{this.city.city_relation.map($=>{if(e.core_keys_id===$.core_keys_id){let _=$.value;this.form.city_relation[e.core_keys_id]=_==="1"?!0:_==="0"?!1:_}})})},computed:{breadcrumb(){return[{label:V("core__be_dashboard_label"),url:route("admin.index")},{label:V("city_module"),url:route("city.index")},{label:V("core__edit_city"),color:"text-primary-500"}]}},methods:{handleCancel(){this.$inertia.get(route("city.index"))}}}),ge={class:"rounded-xl"},_e={class:"bg-primary-50 dark:bg-primary-900 py-2.5 ps-4 rounded-t-xl"},Ce={class:"px-4 pt-6 dark:bg-backgroundDark"},fe={class:"grid w-full sm:w-1/2 gap-6"},$e=d("span",{class:"text-red-800 font-medium ms-1"},"*",-1),we={key:0,class:"mb-4"},Pe={class:"text-red-800 font-medium ms-1"},Ee={class:"rounded-md shadow-xs w-full"},Be={class:"pt-2"},Fe={key:0},Ue={key:1},Le=["onClick"],De={key:1,class:"mb-4"},Ke=s("*"),Ie={key:2,class:"mb-4"},ze={class:"text-red-800 font-medium ms-1"},Se={class:"flex flex-row"},He={key:3,class:"mb-4"},Te={class:"flex flex-row"},Me={class:"mr-2 flex"},Ae=["onUpdate:modelValue","onChange"],he={key:4,class:"mb-4"},Ve={class:"text-red-800 font-medium ms-1"},We={key:5,class:"mb-4"},Ne={class:"text-red-800 font-medium ms-1"},je={key:6,class:"mb-4"},qe={class:"text-red-800 font-medium ms-1"},Ge={key:7,class:"mb-4"},Je=s("*"),Oe={class:"flex flex-row"},Re={key:8,class:"mb-4"},Qe={class:"text-red-800 font-medium ms-1"},Xe={key:9,class:"mb-4"},Ye={class:"text-red-800 font-medium ms-1"},Ze=["onUpdate:modelValue"],xe={key:10,class:"mb-4"},et={class:"text-red-800 font-medium ms-1"},tt={class:"flex flex-row justify-end mb-2.5"},ot={key:2,class:"transition-all duration-300"},rt={key:3,class:""};function nt(e,i,$,_,B,F){const f=c("Head"),I=c("ps-breadcrumb-2"),z=c("ps-label-header-6"),y=c("ps-label"),C=c("ps-input"),v=c("ps-label-caption"),U=c("ps-textarea"),S=c("google-map-pin-picker"),H=c("ps-dropdown-select"),T=c("ps-dropdown"),M=c("ps-radio-value"),L=c("date-picker"),w=c("CheckBox"),A=c("ps-image-upload"),D=c("ps-button"),a=c("ps-loading"),u=c("ps-icon"),P=c("ps-card"),h=c("ps-layout");return p(),m(K,null,[o(f,{title:e.$t("core__edit_city")},null,8,["title"]),o(h,null,{default:n(()=>[o(I,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),o(P,{class:"w-full h-auto"},{default:n(()=>[d("div",ge,[d("div",_e,[o(z,{textColor:"text-secondary-800 dark:text-secondary-100"},{default:n(()=>[s(l(e.$t("core__city_info")),1)]),_:1})]),d("div",Ce,[d("form",{onSubmit:i[13]||(i[13]=Q(t=>e.handleSubmit(this.city.id),["prevent"]))},[d("div",fe,[d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[s(l(e.$t("core__be_city_name_label")),1),$e]),_:1}),o(C,{type:"text",value:e.form.name,"onUpdate:value":i[0]||(i[0]=t=>e.form.name=t),placeholder:e.$t("core__be_city_name_placeholder"),onKeyup:i[1]||(i[1]=t=>e.validateLocationNameInput("name",e.form.name)),onBlur:i[2]||(i[2]=t=>e.validateLocationNameInput("name",e.form.name))},null,8,["value","placeholder"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.errors.name),1)]),_:1})]),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[s(l(e.$t("core__be_ordering_label")),1)]),_:1}),o(C,{type:"text",value:e.form.ordering,"onUpdate:value":i[3]||(i[3]=t=>e.form.ordering=t),placeholder:e.$t("core__be_ordering_placeholder"),onKeypress:e.onlyNumber},null,8,["value","placeholder","onKeypress"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.errors.ordering),1)]),_:1})]),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[s(l(e.$t("core__be_description_label")),1)]),_:1}),o(U,{rows:"3",value:e.form.description,"onUpdate:value":i[4]||(i[4]=t=>e.form.description=t),placeholder:e.$t("core__be_description_placeholder")},null,8,["value","placeholder"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.errors.description),1)]),_:1})]),d("div",null,[o(S,{lat:parseFloat(e.form.lat),lng:parseFloat(e.form.lng),widthHeight:"width: 458px; height: 500px",onChange:e.updateCoordinates},null,8,["lat","lng","onChange"])]),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[s(l(e.$t("core__be_latitude_label")),1)]),_:1}),o(C,{type:"text",value:e.form.lat,"onUpdate:value":i[5]||(i[5]=t=>e.form.lat=t),placeholder:e.$t("core__be_latitude_placeholder"),onKeypress:e.onlyNumberWithCustom,onKeyup:i[6]||(i[6]=t=>e.validateLatitudeInput("lat",e.form.lat)),onBlur:i[7]||(i[7]=t=>e.validateLatitudeInput("lat",e.form.lat))},null,8,["value","placeholder","onKeypress"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.errors.lat),1)]),_:1})]),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[s(l(e.$t("core__be_longitude_label")),1)]),_:1}),o(C,{type:"text",value:e.form.lng,"onUpdate:value":i[8]||(i[8]=t=>e.form.lng=t),placeholder:e.$t("core__be_longitude_placeholder"),onKeypress:e.onlyNumberWithCustom,onKeyup:i[9]||(i[9]=t=>e.validateLongitudeInput("lng",e.form.lng)),onBlur:i[10]||(i[10]=t=>e.validateLongitudeInput("lng",e.form.lng))},null,8,["value","placeholder","onKeypress"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.errors.lng),1)]),_:1})]),(p(!0),m(K,null,W(e.customizeHeaders,t=>(p(),m("div",{key:t.id},[t.ui_type_id==="uit00001"&&t.enable===1&&t.is_delete===0?(p(),m("div",we,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name)),1),k(d("span",Pe,"*",512),[[g,t.mandatory==1]])]),_:2},1024),o(T,{align:"left",class:"lg:mt-2 mt-1 w-full"},{select:n(()=>[o(H,{ref_for:!0,ref:"currency",placeholder:e.$t(t.placeholder),showCenter:!0,selectedValue:this.customizeDetails.filter(r=>r.id==this.form.city_relation[t.core_keys_id]).length>0?this.customizeDetails.filter(r=>r.id==this.form.city_relation[t.core_keys_id])[0].name:"",onChange:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","selectedValue","onChange","onBlur"])]),list:n(()=>[d("div",Ee,[d("div",Be,[e.customizeDetails.filter(r=>r.core_keys_id===t.core_keys_id).length===0?(p(),m("div",Fe,[o(y,{class:"p-2 flex",onClick:i[11]||(i[11]=r=>e.route("currency.index"))},{default:n(()=>[s("Create new "+l(e.$t(t.name)),1)]),_:2},1024)])):(p(),m("div",Ue,[(p(!0),m(K,null,W(e.customizeDetails.filter(r=>r.core_keys_id===t.core_keys_id),r=>(p(),m("div",{key:r.id,class:"w-96 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-secondary-700 cursor-pointer items-center",onClick:N=>[e.form.city_relation[t.core_keys_id]=r.id,e.validateEmptyInput("currency_id",e.form.city_relation[t.core_keys_id])]},[o(y,{class:X(["ms-2",r.id==e.form.city_relation[t.core_keys_id]?" font-bold":""])},{default:n(()=>[s(l(r.name),1)]),_:2},1032,["class"])],8,Le))),128))]))])])]),_:2},1024),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00002"&&t.enable===1&&t.is_delete===0?(p(),m("div",De,[o(y,null,{default:n(()=>[k(o(y,{class:"text-red-800 font-medium me-1"},{default:n(()=>[Ke]),_:2},1536),[[g,t.mandatory==1]]),s(l(e.$t(t.name)),1)]),_:2},1024),o(C,{type:"text",class:"w-full rounded",placeholder:e.$t(t.placeholder),value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","value","onUpdate:value","onKeyup","onBlur"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00003"&&t.enable===1&&t.is_delete===0?(p(),m("div",Ie,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name))+" ",1),k(d("span",ze,"*",512),[[g,t.mandatory===1]])]),_:2},1024),d("div",Se,[(p(!0),m(K,null,W(e.customizeDetails.filter(r=>r.core_keys_id===t.core_keys_id),r=>(p(),m("div",{class:"mr-2",key:r.id},[o(M,{color:"text-purple-600 border-purple-300",value:e.form.city_relation[t.core_keys_id],"onUpdate:value":N=>e.form.city_relation[t.core_keys_id]=N,title:r.name},null,8,["value","onUpdate:value","title"]),o(y,{for:r.id},{default:n(()=>[s(l(r.attribute),1)]),_:2},1032,["for"])]))),128))]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00004"&&t.enable===1&&t.is_delete===0?(p(),m("div",He,[d("div",Te,[d("div",Me,[k(d("input",{type:"checkbox",class:"rounded border",value:"0","onUpdate:modelValue":r=>e.form.city_relation[t.core_keys_id]=r,onChange:r=>e.handleCustomFieldError(t)},null,40,Ae),[[Y,e.form.city_relation[t.core_keys_id]]]),o(y,{class:"ms-2"},{default:n(()=>[s(l(e.$t(t.name)),1)]),_:2},1024)])]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00005"&&t.enable===1&&t.is_delete===0?(p(),m("div",he,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name))+" ",1),k(d("span",Ve,"*",512),[[g,t.mandatory===1]])]),_:2},1024),d("div",null,[o(L,{value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t),enableTimePicker:!0,inline:!1,autoApply:!1},null,8,["value","onUpdate:value","onKeyup","onBlur"])]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00006"&&t.enable===1&&t.is_delete===0?(p(),m("div",We,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name))+" ",1),k(d("span",Ne,"*",512),[[g,t.mandatory===1]])]),_:2},1024),o(U,{rows:"4",placeholder:e.$t(t.placeholder),value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","value","onUpdate:value","onKeyup","onBlur"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00007"&&t.enable===1&&t.is_delete===0?(p(),m("div",je,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name))+" ",1),k(d("span",qe,"*",512),[[g,t.mandatory===1]])]),_:2},1024),o(C,{type:"number",class:"w-full rounded",placeholder:e.$t(t.placeholder),value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","value","onUpdate:value","onKeyup","onBlur"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00008"&&t.enable===1&&t.is_delete===0?(p(),m("div",Ge,[o(y,null,{default:n(()=>[k(o(y,{class:"text-red-800 font-medium me-1"},{default:n(()=>[Je]),_:2},1536),[[g,t.mandatory==1]]),s(l(e.$t(t.name)),1)]),_:2},1024),d("div",Oe,[o(w,{oldData:e.form.custom_fields[t.id],onToParent:e.handleMultiSelect,customizeDetails:e.custom_field_details,customizeHeader:t},null,8,["oldData","onToParent","customizeDetails","customizeHeader"])]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00009"&&t.enable===1&&t.is_delete===0?(p(),m("div",Re,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name))+" ",1),k(d("span",Qe,"*",512),[[g,t.mandatory===1]])]),_:2},1024),o(A,{uploadType:"image",imageFile:e.form.city_relation[t.core_keys_id],"onUpdate:imageFile":r=>e.form.city_relation[t.core_keys_id]=r},null,8,["imageFile","onUpdate:imageFile"]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00010"&&t.enable===1&&t.is_delete===0?(p(),m("div",Xe,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name))+" ",1),k(d("span",Ye,"*",512),[[g,t.mandatory===1]])]),_:2},1024),k(d("input",{type:"time",class:"w-full rounded","onUpdate:modelValue":r=>e.form.city_relation[t.core_keys_id]=r},null,8,Ze),[[Z,e.form.city_relation[t.core_keys_id]]]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0),t.ui_type_id==="uit00011"&&t.enable===1&&t.is_delete===0?(p(),m("div",xe,[o(y,{class:"text-base"},{default:n(()=>[s(l(e.$t(t.name))+" ",1),k(d("span",et,"*",512),[[g,t.mandatory===1]])]),_:2},1024),d("div",null,[o(L,{value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t),inline:!1,autoApply:!1},null,8,["value","onUpdate:value","onKeyup","onBlur"])]),o(v,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[s(l(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):b("",!0)]))),128)),d("div",tt,[o(D,{onClick:i[12]||(i[12]=t=>e.handleCancel()),textSize:"text-sm ",type:"reset",class:"me-4",colors:"text-primary-500",focus:"",hover:""},{default:n(()=>[s(l(e.$t("core__be_btn_cancel")),1)]),_:1}),o(D,{class:"transition-all duration-300 min-w-3xs",padding:"px-5 py-2",rounded:"rounded",hover:"",focus:""},{default:n(()=>[e.loading?(p(),j(a,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):b("",!0),e.success?(p(),j(u,{key:1,name:"check",w:"20",h:"20",class:"me-1.5 transition-all duration-300"})):b("",!0),e.success?(p(),m("span",ot,l(e.$t("core__be_btn_saved")),1)):b("",!0),!e.loading&&!e.success?(p(),m("span",rt,l(e.$t("core__be_btn_save")),1)):b("",!0)]),_:1})])])],32)])])]),_:1})]),_:1})],64)}var Bt=ve(ke,[["render",nt]]);export{Bt as default};
