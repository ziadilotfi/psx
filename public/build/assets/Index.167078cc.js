import{e as me,f as _e,P as he,a as fe,d as be}from"./PsLayout.dfd88468.js";import{d as ge,H as ve,i as s,ac as b,C as J,ag as K,r as g,o as n,c as m,b as o,w as r,a as d,p as c,t as u,f as j,g as v,F as A,q as L,n as V}from"./app.17cd73cb.js";import{P as ye}from"./PsButton.e57c4d7d.js";import{P as ke}from"./PsBannerIcon.71d1b60f.js";import{P as we}from"./PsBreadcrumb2.49a3f56a.js";import{P as Ce}from"./PsIcon.05949a2a.js";import{D as Oe}from"./PsTableSearch.4ca5ffa6.js";import{P as Se}from"./PsIconButton.af329d7a.js";import{P as De}from"./PsLabel.22ffb702.js";import{P as $e}from"./PsLink1.148ec573.js";import{b as Pe}from"./PsModal.bee9bcb9.js";import{P as Fe}from"./PsTable2.559b3bb1.js";import{D as Ie}from"./DatePicker.55e143e0.js";import{P as je}from"./PsBadge.b81aaf9e.js";import{_ as Ae}from"./plugin-vue_export-helper.21dcd24c.js";import{g as Ve,a as He,f as Te,h as Be}from"./psApiService.215afa15.js";import{P as Ue}from"./PsInputWithRightIcon.1f31b4ee.js";import"./PsIcon1.1b6f6944.js";import"./moment.9709ab41.js";const Re=ge({name:"Index",components:{Head:ve,PsButton:ye,PsTextButton:me,PsBannerIcon:ke,PsBreadcrumb2:we,PsDangerDialog:_e,PsIcon:Ce,PsDropdown:he,PsDropdownSelect:fe,Dropdown:Oe,PsIconButton:Se,PsLabel:De,PsLink1:$e,PsToggle:Pe,PsTable2:Fe,DatePicker:Ie,PsBadge:je,PsInputWithRightIcon:Ue},layout:be,props:{status:Object,items:Object,categories:Object,subcategories:Object,customizeHeaders:Object,customizeDetails:Object,hideShowFieldForFilterArr:Object,showCoreAndCustomFieldArr:Object,selectedCategory:{type:String,default:""},selectedSubcategory:{type:String,default:""},selectedDealOption:{type:String,default:""},selectedPurchaseOption:{type:String,default:""},selectedDate:{type:String,default:""},authUser:Object,uis:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String,itmPurchasedOption:String,itmDealOption:String,itmConditionOfItem:String,itmItemType:String},setup(e){let i=s(!1);const H=s(!0),N=e.selectedCategory||e.selectedSubcategory||e.selectedDealOption||e.selectedPurchaseOption||e.selectedDate?s(!0):s(!1),q=s(!1);let T=e.search?s(e.search):s(""),B=e.sort_field?s(e.sort_field):s(""),U=e.sort_order?s(e.sort_order):s("desc"),f=e.selectedCategory?s(e.selectedCategory.id):s(""),O=e.selectedSubcategory?s(e.selectedSubcategory.id):s(""),P=e.selectedDealOption?s(e.selectedDealOption.id):s(""),w=e.selectedPurchaseOption?s(e.selectedPurchaseOption.id):s(""),p=e.selectedDate?s(e.selectedDate):s(""),S=s([]),D=s(!1),F=s(),h=s(!1),$=s([]),I=s(!1),t=s(),C=s([]),R=s(!1),M=s(),z=s([]),E=s(!1),Q=s();const X=s(),Y=[{label:b("core__be_items"),field:"title",type:"String",action:"Action"},{label:b("core__be_item_categories"),field:"category_id@@name",type:"Integer",action:"Action"},{label:b("core__be_item_subcategories"),field:"subcategory_id@@name",type:"Integer",action:"Action"},{label:b("core__be_item_price"),field:"price",type:"Integer",action:"Action"},{label:b("core__be_purchased_option"),field:e.itmPurchasedOption+"@@name",type:"String"},{label:b("core__be_item_condition"),field:e.itmConditionOfItem+"@@name",type:"String"},{label:b("core__be_item_type"),field:e.itmItemType+"@@name",type:"String"},{label:b("core__be_deal_option"),field:e.itmDealOption+"@@name",type:"String",action:"Action"},{label:b("core__be_engagement"),field:"item_touch_count",type:"Integer",action:"Action"},{label:b("core__be_date"),field:"added_date",type:"Timestamp",action:"Action"},{label:b("core__be_detail_label"),field:"detail",type:"Action",sort:!1}];function Z(a){B.value=a.field,U.value=a.sort_order,k()}function x(){f.value="all",O.value="all",P.value="all",w.value="all",p.value="",T="",k(),H.value=!1,setTimeout(()=>{H.value=!0},100)}function ee(a){f.value=a,O.value="all";let l=1;$.value=[],k(l)}function te(a){O.value=a,k(1)}function le(a){P.value=a,k(1)}function re(a){w.value=a,k(1)}function ae(a){p.value=a,k(1)}function oe(a){T.value=a,k(1)}function se(a){k(1,a)}function k(a=null,l=null){K.Inertia.get(route("item_report.index"),{sort_field:B.value,sort_order:U.value,page:a!=null?a:e.items.meta.current_page,row:l!=null?l:e.items.meta.per_page,search:T.value,category_filter:f.value,sub_category_filter:O.value,deal_option_filter:P.value,purchase_option_filter:w.value,date_filter:p.value},{preserveScroll:!0,preserveState:!0})}function W(a){D.value=!0,h.value=!0,Ve(a,F.value,e.authUser.id).then(l=>{l.data.length?l.data.forEach(y=>{S.value.push(y)}):D.value=!1,h.value=!1})}function ie(a=null){let l=S.value?S.value.length:0;(l==0||a==!0)&&W(l)}J(F,_.debounce((a,l)=>{let y=0;S.value=[],W(y)},500));function G(a){I.value=!0,h.value=!0,He(a,t.value,e.authUser.id,f.value).then(l=>{l.data.length?l.data.forEach(y=>{$.value.push(y)}):I.value=!1,h.value=!1})}function ne(a=null){let l=$.value?$.value.length:0;(l==0||a==!0)&&G(l)}J(t,_.debounce((a,l)=>{let y=0;$.value=[],G(y)},500));function de(a){R.value=!0,h.value=!0,Te(a,e.authUser.id).then(l=>{l.data.length?l.data.forEach(y=>{C.value.push(y)}):R.value=!1,h.value=!1}).catch(function(l){l&&(h.value=!1,R.value=!1)})}function ce(a=null){let l=C.value?C.value.length:0;(l==0||a==!0)&&de(l)}function ue(a){E.value=!0,h.value=!0,Be(a,e.authUser.id).then(l=>{l.data.length?l.data.forEach(y=>{z.value.push(y)}):E.value=!1,h.value=!1}).catch(function(l){l&&(h.value=!1,E.value=!1)})}function pe(a=null){let l=z.value?z.value.length:0;(l==0||a==!0)&&ue(l)}return{reRenderDate:H,showFilter:N,clearFilter:q,columns:Y,colFilterOptions:X,visible:i,handleSorting:Z,handleSearchingSorting:k,handleCategoryfilter:ee,handleSubcategoryfilter:te,handleDealOptionFilter:le,handlePurchaseOptionFilter:re,handleDateFilter:ae,handleClearFilter:x,handleRow:se,handleSearching:oe,selected_cat:f,selected_sub_cat:O,selected_deal_option:P,selected_purchase_option:w,selected_date:p,subCategoryDropdownClick:ne,subCategories:$,subCategory_loadmore_visible:I,subCatSearch:t,is_loading:h,dropdownClick:ie,categories:S,category_loadmore_visible:D,catSearch:F,purchaseOptions:C,purchaseOptions_loadmore_visible:R,purchaseOptionsSearch:M,purchaseOptionDropdownClick:ce,dealOptions:z,dealOptions_loadmore_visible:E,dealOptionsSearch:Q,dealOptionDropdownClick:pe}},created(){},methods:{handleDetail(e){this.$inertia.get(route("item_report.show",e))},FilterOptionshandle(e){K.Inertia.put(route("item_report.screenDisplayUiSetting.store"),{value:e,sort_field:this.sort_field,sort_order:this.sort_order,row:this.items.per_page,search:this.search.value,current_page:this.items.current_page},{preserveScroll:!0,preserveState:!0})}},computed:{breadcrumb(){return[{label:b("core__be_dashboard_label"),url:route("admin.index")},{label:b("item_report_module"),color:"text-primary-500"}]}}}),ze=["href"],Ee={class:"rounded-md shadow-xs w-56"},Le={class:"pt-2 z-30"},Ne=["onClick"],qe={class:"flex flex-row items-center justify-between"},We={class:"mt-1 mx-1"},Ge={class:"rounded-md shadow-xs w-56"},Je={class:"pt-2 z-30"},Ke=["onClick"],Me={class:"flex flex-row items-center justify-between"},Qe={class:"mt-1 mx-1"},Xe={class:"rounded-md shadow-xs w-56"},Ye={class:"pt-2 z-30"},Ze=["onClick"],xe={class:"flex flex-row items-center justify-between"},et={class:"rounded-md shadow-xs w-56"},tt={class:"pt-2 z-30"},lt=["onClick"],rt={class:"flex flex-row items-center justify-between"},at={key:0},ot={key:1},st={key:2},it={key:3,class:"flex flex-row"};function nt(e,i,H,N,q,T){const B=g("Head"),U=g("ps-breadcrumb-2"),f=g("ps-icon"),O=g("ps-text-button"),P=g("ps-icon-button"),w=g("ps-dropdown-select"),p=g("ps-label"),S=g("ps-input-with-right-icon"),D=g("ps-dropdown"),F=g("date-picker"),h=g("ps-badge"),$=g("ps-table2"),I=g("ps-layout");return n(),m(A,null,[o(B,{title:e.$t("item_report_module")},null,8,["title"]),o(I,null,{default:r(()=>[o(U,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),o($,{":row":e.row,search:e.search,object:this.items,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,globalSearchPlaceholder:e.$t("core__be_search"),onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter,eye_filter:!1},{searchLeft:r(()=>[d("a",{href:e.route("item_report.csv.export"),class:"font-medium transition duration-150 ease-in-out px-2 py-1.75 ms-1 rounded text-primary-500 border border-primary-500 hover:outline-none hover:ring hover:ring-blue-100 focus:outline-none focus:ring focus:ring-blue-300 opacity-100 flex items-center"},[o(f,{name:"fileUpload",class:"mx-0.5 font-semibold"}),c(u(e.$t("core__be_export_btn")),1)],8,ze)]),searchRight:r(()=>[e.showFilter?(n(),j(O,{key:0,onClick:i[0]||(i[0]=t=>e.handleClearFilter()),class:"flex text-sm items-center text-red-400 dark:text-red-400",padding:"py-1 px-4"},{default:r(()=>[o(f,{theme:"dark:text-red-400",name:"cross",class:"me-3"}),c(" "+u(e.$t("core__be_clear_filter")),1)]),_:1})):v("",!0),o(P,{colors:e.showFilter?"bg-primary-500 text-white dark:text-secondary-800":"",focus:"",padding:"py-1 px-4",hover:"hover:bg-primary-500 hover:text-white",border:e.showFilter?"border border-primary-500":" border border-secondary-200",leftIcon:"filter",onClick:i[1]||(i[1]=t=>e.showFilter=!e.showFilter)},{default:r(()=>[c(u(e.$t("core__be_filter")),1)]),_:1},8,["colors","border"])]),Filter:r(()=>[o(D,{onOnClick:e.dropdownClick,align:"",class:"h-10"},{select:r(()=>[o(w,{placeholder:e.$t("core__be_category"),border:e.selected_cat!==""&&e.selected_cat!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_cat==""||e.selected_cat=="all"?"":e.selectedCategory.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[d("div",Ee,[d("div",Le,[d("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:i[2]||(i[2]=t=>e.handleCategoryfilter("all"))},[o(p,{class:"text-gray-200 ms-2"},{default:r(()=>[c(u(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),m(A,null,L(e.categories,t=>(n(),m("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handleCategoryfilter(t.id)},[o(p,{class:V(["ms-2",t.id==e.selected_cat?" font-bold":""])},{default:r(()=>[c(u(t.name),1)]),_:2},1032,["class"])],8,Ne))),128))])])]),loadmore:r(()=>[e.category_loadmore_visible?(n(),m("div",{key:0,onClick:i[3]||(i[3]=t=>e.dropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[d("div",qe,[o(p,{class:"ms-2"},{default:r(()=>[c(u(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),o(f,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):v("",!0)]),filter:r(()=>[d("div",We,[o(S,{class:"w-full h-10",theme:"bg-gray-100",rounded:"rounded-lg",value:e.catSearch,"onUpdate:value":i[4]||(i[4]=t=>e.catSearch=t),placeholder:e.$t("core__be_search")},{icon:r(()=>[o(f,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),_:1},8,["onOnClick"]),o(D,{onOnClick:e.subCategoryDropdownClick,class:"h-10"},{select:r(()=>[o(w,{placeholder:e.$t("core__be_subcategory"),border:e.selected_sub_cat!==""&&e.selected_sub_cat!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_sub_cat==""||e.selected_sub_cat=="all"?"":e.selectedSubcategory.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[d("div",Ge,[d("div",Je,[d("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:i[5]||(i[5]=t=>e.handleSubcategoryfilter("all"))},[o(p,{class:"text-gray-200 ms-2"},{default:r(()=>[c(u(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),m(A,null,L(e.subCategories,t=>(n(),m("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handleSubcategoryfilter(t.id)},[o(p,{class:V(["ms-2",t.id==e.selected_sub_cat?" font-bold":""])},{default:r(()=>[c(u(t.name),1)]),_:2},1032,["class"])],8,Ke))),128))])])]),loadmore:r(()=>[e.subCategory_loadmore_visible?(n(),m("div",{key:0,onClick:i[6]||(i[6]=t=>e.subCategoryDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[d("div",Me,[o(p,{class:"ms-2"},{default:r(()=>[c(u(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),o(f,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):v("",!0)]),filter:r(()=>[d("div",Qe,[o(S,{class:"w-full h-10",theme:"bg-gray-100",rounded:"rounded-lg",value:e.subCatSearch,"onUpdate:value":i[7]||(i[7]=t=>e.subCatSearch=t),placeholder:e.$t("core__be_search")},{icon:r(()=>[o(f,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),_:1},8,["onOnClick"]),o(D,{onOnClick:e.purchaseOptionDropdownClick,align:"",class:"h-10"},{select:r(()=>[o(w,{placeholder:e.$t("core__be_purchased_option"),border:e.selected_purchase_option!==""&&e.selected_purchase_option!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_purchase_option==""||e.selected_purchase_option=="all"?"":e.selectedPurchaseOption.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[d("div",Xe,[d("div",Ye,[d("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:i[8]||(i[8]=t=>e.handlePurchaseOptionFilter("all"))},[o(p,{class:"text-gray-200 ms-2"},{default:r(()=>[c(u(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),m(A,null,L(e.purchaseOptions,t=>(n(),m("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handlePurchaseOptionFilter(t.id)},[o(p,{class:V(["ms-2",t.id==e.selected_purchase_option?" font-bold":""])},{default:r(()=>[c(u(t.name),1)]),_:2},1032,["class"])],8,Ze))),128))])])]),loadmore:r(()=>[e.purchaseOptions_loadmore_visible?(n(),m("div",{key:0,onClick:i[9]||(i[9]=t=>e.purchaseOptionDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[d("div",xe,[o(p,{class:"ms-2"},{default:r(()=>[c(u(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),o(f,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):v("",!0)]),_:1},8,["onOnClick"]),o(D,{onOnClick:e.dealOptionDropdownClick,align:"",class:"h-10"},{select:r(()=>[o(w,{placeholder:e.$t("core__be_deal_option"),border:e.selected_deal_option!==""&&e.selected_deal_option!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_deal_option==""||e.selected_deal_option=="all"?"":e.selectedDealOption.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[d("div",et,[d("div",tt,[d("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:i[10]||(i[10]=t=>e.handleDealOptionFilter("all"))},[o(p,{class:"text-gray-200 ms-2"},{default:r(()=>[c(u(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),m(A,null,L(e.dealOptions,t=>(n(),m("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handleDealOptionFilter(t.id)},[o(p,{class:V(["ms-2",t.id==e.selected_purchase_option?" font-bold":""])},{default:r(()=>[c(u(t.name),1)]),_:2},1032,["class"])],8,lt))),128))])])]),loadmore:r(()=>[e.dealOptions_loadmore_visible?(n(),m("div",{key:0,onClick:i[11]||(i[11]=t=>e.dealOptionDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[d("div",rt,[o(p,{class:"ms-2"},{default:r(()=>[c(u(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),o(f,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):v("",!0)]),_:1},8,["onOnClick"]),e.reRenderDate?(n(),j(F,{key:0,placeholder:e.$t("core__be_select_date"),onDatepick:e.handleDateFilter,class:V(["rounded shadow-sm pt-0.5 focus:outline-none focus:ring-1 focus:ring-primary-500",(e.selected_date==null||e.selected_date=="","w-full")]),value:e.selected_date,"onUpdate:value":i[12]||(i[12]=t=>e.selected_date=t),range:!0,inline:!1,autoApply:!1},null,8,["placeholder","onDatepick","class","value"])):v("",!0)]),tableRow:r(t=>[t.field==e.itmPurchasedOption+"@@name"?(n(),m("span",at,[t.row[e.itmPurchasedOption+"@@name"]?(n(),j(h,{key:0,class:""},{default:r(()=>[c(u(t.row[e.itmPurchasedOption+"@@name"]),1)]),_:2},1024)):v("",!0)])):v("",!0),t.field==e.itmItemType+"@@name"?(n(),m("span",ot,[t.row[e.itmItemType+"@@name"]?(n(),j(h,{key:0,theme:"text-red-500 bg-red-100",class:""},{default:r(()=>[c(u(t.row[e.itmItemType+"@@name"]),1)]),_:2},1024)):v("",!0)])):v("",!0),t.field==e.itmConditionOfItem+"@@name"?(n(),m("span",st,[t.row[e.itmConditionOfItem+"@@name"]?(n(),j(h,{key:0,theme:"text-red-500 bg-red-100",class:""},{default:r(()=>[c(u(t.row[e.itmConditionOfItem+"@@name"]),1)]),_:2},1024)):v("",!0)])):v("",!0),t.field=="detail"?(n(),m("div",it,[o(O,{onClick:C=>e.handleDetail(t.row.id)},{default:r(()=>[c(u(e.$t("core__be_btn_detail")),1)]),_:2},1032,["onClick"])])):v("",!0)]),_:1},8,[":row","search","object","colFilterOptions","columns","sort_field","sort_order","globalSearchPlaceholder","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable"])]),_:1})],64)}var Pt=Ae(Re,[["render",nt]]);export{Pt as default};
