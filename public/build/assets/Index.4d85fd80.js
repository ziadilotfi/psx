import{d as te,L as re,H as ae,i as s,ac as p,C as J,ag as U,r as m,o as i,c as h,b as a,w as r,f as w,p as u,t as c,g as f,a as g,F as T,q as L,n as q}from"./app.17cd73cb.js";import{f as le,e as oe,P as se,a as ne,d as ie}from"./PsLayout.dfd88468.js";import{P as de}from"./PsLabel.22ffb702.js";import{P as ue}from"./PsButton.e57c4d7d.js";import{P as ce}from"./PsTable2.559b3bb1.js";import{P as me}from"./PsAlert.28e258d7.js";import{P as _e}from"./PsBreadcrumb2.49a3f56a.js";import{b as pe}from"./PsModal.bee9bcb9.js";import{P as fe}from"./PsIcon.05949a2a.js";import{P as be}from"./PsBannerIcon.71d1b60f.js";import{P as he}from"./PsIconButton.af329d7a.js";import{P as ge}from"./PsBadge.b81aaf9e.js";import{g as ye,a as ve}from"./psApiService.215afa15.js";import{P as we}from"./PsInput.1d284888.js";import{P as Ce}from"./PsInputWithRightIcon.1f31b4ee.js";import{_ as ke}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsTableSearch.4ca5ffa6.js";import"./moment.9709ab41.js";import"./PsIcon1.1b6f6944.js";const Se=te({name:"Index",components:{Link:re,Head:ae,PsLabel:de,PsButton:ue,PsTable2:ce,PsAlert:me,PsBreadcrumb2:_e,PsDangerDialog:le,PsToggle:pe,PsIcon:fe,PsBannerIcon:be,PsIconButton:he,PsTextButton:oe,PsBadge:ge,PsDropdown:se,PsDropdownSelect:ne,PsInput:we,PsInputWithRightIcon:Ce},layout:ie,props:{can:Object,status:Object,paidItems:Object,hideShowFieldForFilterArr:Object,showCoreAndCustomFieldArr:Object,selectedCategory:{type:String,default:""},selectedSubcategory:{type:String,default:""},selectedPaymentStatus:{type:String,default:""},authUser:Object,uis:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String,itmPurchasedOption:String,itmDealOption:String,itmConditionOfItem:String,itmItemType:String},setup(e){const d=s(!1),M=s(!1);let V=e.search?s(e.search):s(""),R=e.sort_field?s(e.sort_field):s(""),A=e.sort_order?s(e.sort_order):s("desc"),C=e.selectedCategory?s(e.selectedCategory.id):s(""),k=e.selectedSubcategory?s(e.selectedSubcategory.id):s(""),O=e.selectedPaymentStatus?s(e.selectedPaymentStatus):s(""),b=s([]),F=s(!1),D=s(),y=s(!1),o=s([]),I=s(!1),S=s();const j=s();let z=[{id:"0",name:p("core__be_waiting_for_approval")},{id:"1",name:p("core__be_approved")},{id:"2",name:p("core__be_rejected")}];const B=s(),E=[{label:p("  "),field:"action",type:"Action"},{label:p("core__be_item"),field:"title",type:"String"},{label:p("core__be_category"),field:"category",type:"String"},{label:p("core__be_subcategory"),field:"subcategory",type:"String"},{label:p("core__be_payment_status"),field:"status",type:"String",action:"Action"}];function N(l){j.value.openModal(p("itemPromotion__delete_offline_paid_itm"),p("itemPromotion__del_offline_paid_itm_info"),p("core__be_btn_confirm"),p("core__be_btn_cancel"),()=>{U.Inertia.delete(route("offline_paid_item.destroy",l),{onSuccess:()=>{H.value=!0,setTimeout(()=>{H.value=!1},3e3)},onError:()=>{H.value=!0,setTimeout(()=>{H.value=!1},3e3)}})},()=>{})}function t(l){R.value=l.field,A.value=l.sort_order,v()}function P(){C.value="all",k.value="all",O.value="all",v()}function K(l){k.value="all",C.value=l,o.value=[],v(1)}function Q(l){k.value=l,v(1)}function X(l){O.value=l,v(1)}function Y(l){V.value=l,v(1)}function Z(l){v(1,l)}function v(l=null,n=null){U.Inertia.get(route("offline_paid_item.index"),{sort_field:R.value,sort_order:A.value,page:l!=null?l:e.paidItems.meta.current_page,row:n!=null?n:e.paidItems.meta.per_page,search:V.value,category_filter:C.value,sub_category_filter:k.value,payment_status_filter:O.value},{preserveScroll:!0,preserveState:!0})}function W(l){F.value=!0,y.value=!0,ye(l,D.value,e.authUser.id).then(n=>{n.data.length?n.data.forEach($=>{b.value.push($)}):F.value=!1,y.value=!1})}function x(l=null){let n=b.value?b.value.length:0;(n==0||l==!0)&&W(n)}J(D,_.debounce((l,n)=>{let $=0;b.value=[],W($)},500));function G(l){I.value=!0,y.value=!0,ve(l,S.value,e.authUser.id,C.value).then(n=>{n.data.length?n.data.forEach($=>{o.value.push($)}):I.value=!1,y.value=!1})}function ee(l=null){let n=o.value?o.value.length:0;(n==0||l==!0)&&G(n)}J(S,_.debounce((l,n)=>{let $=0;o.value=[],G($)},500));let H=s(!1);return{showFilter:d,clearFilter:M,columns:E,confirmDeleteClicked:N,ps_danger_dialog:j,colFilterOptions:B,visible:H,handleSorting:t,handleSearchingSorting:v,handleCategoryfilter:K,handleSubcategoryfilter:Q,handlePaymentStatusfilter:X,handleClearFilter:P,handleRow:Z,handleSearching:Y,selected_cat:C,selected_sub_cat:k,selected_payment_status:O,types:z,dropdownClick:x,categories:b,category_loadmore_visible:F,catSearch:D,subCategoryDropdownClick:ee,subCategories:o,subCategory_loadmore_visible:I,subCatSearch:S,is_loading:y}},computed:{breadcrumb(){return[{label:p("core__be_dashboard_label"),url:route("admin.index")},{label:p("offline_paid_item_module"),color:"text-primary-500"}]}},methods:{handleCreate(){this.$inertia.get(route("offline_paid_item.create"))},handleEdit(e){this.$inertia.get(route("offline_paid_item.edit",e))},FilterOptionshandle(e){U.Inertia.put(route("offline_paid_item.screenDisplayUiSetting.store"),{value:e,sort_field:this.sort_field,sort_order:this.sort_order,row:this.paidItems.per_page,search:this.search.value,current_page:this.paidItems.current_page},{preserveScroll:!0,preserveState:!0})}}}),$e={class:"rounded-md shadow-xs w-56"},Oe={class:"pt-2 z-30"},Ie=["onClick"],Pe={class:"flex flex-row items-center justify-between"},Fe={class:"mt-1 mx-1"},De={class:"rounded-md shadow-xs w-56"},je={class:"pt-2 z-30"},Be=["onClick"],He={class:"flex flex-row items-center justify-between"},Te={class:"mt-1 mx-1"},Ve={class:"rounded-md shadow-xs w-56"},Re={class:"pt-2 z-30"},Ae=["onClick"],ze={key:0,class:"flex flex-row"},Ee={key:0},Ne={key:1},Ue={key:2};function Le(e,d,M,V,R,A){const C=m("Head"),k=m("ps-breadcrumb-2"),O=m("ps-banner-icon"),b=m("ps-icon"),F=m("ps-text-button"),D=m("ps-icon-button"),y=m("ps-dropdown-select"),o=m("ps-label"),I=m("ps-input-with-right-icon"),S=m("ps-dropdown"),j=m("ps-button"),z=m("ps-danger-dialog"),B=m("ps-badge"),E=m("ps-table2"),N=m("ps-layout");return i(),h(T,null,[a(C,{title:e.$t("offline_paid_item_module")},null,8,["title"]),a(N,null,{default:r(()=>[a(k,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),e.visible?(i(),w(O,{key:0,visible:e.visible,theme:e.status.flag=="danger"?"bg-red-500":e.status.flag=="warning"?"bg-yellow-500":"bg-green-500",iconName:e.status.flag=="danger"?"close-circle":e.status.flag=="warning"?"alert-triangle":"rightalert",class:"text-white mb-4",iconColor:"white"},{default:r(()=>[u(c(e.status.msg),1)]),_:1},8,["visible","theme","iconName"])):f("",!0),a(E,{row:e.row,search:e.search,object:this.paidItems,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter,globalSearchPlaceholder:e.$t("core__be_search_item"),eye_filter:!1},{searchRight:r(()=>[e.showFilter?(i(),w(F,{key:0,onClick:d[0]||(d[0]=t=>e.handleClearFilter()),class:"flex text-sm items-center text-red-400 dark:text-red-400",padding:"py-1 px-4"},{default:r(()=>[a(b,{theme:"dark:text-red-400",name:"cross",class:"me-3"}),u(" "+c(e.$t("core__be_clear_filter")),1)]),_:1})):f("",!0),a(D,{colors:e.showFilter?"bg-primary-500 text-white dark:text-secondary-800":"",focus:"",padding:"py-1 px-4",hover:"hover:bg-primary-500 hover:text-white",border:e.showFilter?"border border-primary-500":" border border-secondary-200",leftIcon:"filter",onClick:d[1]||(d[1]=t=>e.showFilter=!e.showFilter)},{default:r(()=>[u(c(e.$t("core__be_filter")),1)]),_:1},8,["colors","border"])]),Filter:r(()=>[a(S,{onOnClick:e.dropdownClick,align:"",class:"h-10"},{select:r(()=>[a(y,{placeholder:e.$t("core__be_category"),border:e.selected_cat!==""&&e.selected_cat!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_cat==""||e.selected_cat=="all"?"":e.selectedCategory.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[g("div",$e,[g("div",Oe,[g("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:d[2]||(d[2]=t=>e.handleCategoryfilter("all"))},[a(o,{class:"text-gray-200 ms-2"},{default:r(()=>[u(c(e.$t("core__be_select_all")),1)]),_:1})]),(i(!0),h(T,null,L(e.categories,t=>(i(),h("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:P=>e.handleCategoryfilter(t.id)},[a(o,{class:q(["ms-2",t.id==e.selected_cat?" font-bold":""])},{default:r(()=>[u(c(t.name),1)]),_:2},1032,["class"])],8,Ie))),128))])])]),loadmore:r(()=>[e.category_loadmore_visible?(i(),h("div",{key:0,onClick:d[3]||(d[3]=t=>e.dropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[g("div",Pe,[a(o,{class:"ms-2"},{default:r(()=>[u(c(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),a(b,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):f("",!0)]),filter:r(()=>[g("div",Fe,[a(I,{class:"w-full h-10",theme:"bg-gray-100",rounded:"rounded-lg",value:e.catSearch,"onUpdate:value":d[4]||(d[4]=t=>e.catSearch=t),placeholder:e.$t("core__be_search")},{icon:r(()=>[a(b,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),_:1},8,["onOnClick"]),a(S,{onOnClick:e.subCategoryDropdownClick,class:"h-10"},{select:r(()=>[a(y,{placeholder:e.$t("core__be_subcategory"),border:e.selected_sub_cat!==""&&e.selected_sub_cat!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_sub_cat==""||e.selected_sub_cat=="all"?"":e.selectedSubcategory.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[g("div",De,[g("div",je,[g("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:d[5]||(d[5]=t=>e.handleSubcategoryfilter("all"))},[a(o,{class:"text-gray-200 ms-2"},{default:r(()=>[u(c(e.$t("core__be_select_all")),1)]),_:1})]),(i(!0),h(T,null,L(e.subCategories,t=>(i(),h("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:P=>e.handleSubcategoryfilter(t.id)},[a(o,{class:q(["ms-2",t.id==e.selected_sub_cat?" font-bold":""])},{default:r(()=>[u(c(t.name),1)]),_:2},1032,["class"])],8,Be))),128))])])]),loadmore:r(()=>[e.subCategory_loadmore_visible?(i(),h("div",{key:0,onClick:d[6]||(d[6]=t=>e.subCategoryDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[g("div",He,[a(o,{class:"ms-2"},{default:r(()=>[u(c(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),a(b,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):f("",!0)]),filter:r(()=>[g("div",Te,[a(I,{class:"w-full h-10",theme:"bg-gray-100",rounded:"rounded-lg",value:e.subCatSearch,"onUpdate:value":d[7]||(d[7]=t=>e.subCatSearch=t),placeholder:e.$t("core__be_search")},{icon:r(()=>[a(b,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),_:1},8,["onOnClick"]),a(S,{align:"",class:"h-10"},{select:r(()=>[a(y,{placeholder:e.$t("core__be_payment_status"),border:e.selected_payment_status!==""&&e.selected_payment_status!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_payment_status==""||e.selected_payment_status=="all"?"":e.types.filter(t=>t.id==e.selected_payment_status)[0].name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[g("div",Ve,[g("div",Re,[g("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:d[8]||(d[8]=t=>e.handlePaymentStatusfilter("all"))},[a(o,{class:"text-gray-200 ms-2"},{default:r(()=>[u(c(e.$t("core__be_select_all")),1)]),_:1})]),(i(!0),h(T,null,L(e.types,t=>(i(),h("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:P=>e.handlePaymentStatusfilter(t.id)},[a(o,{class:q(["ms-2",t.id==e.selected_payment_status?" font-bold":""])},{default:r(()=>[u(c(t.name),1)]),_:2},1032,["class"])],8,Ae))),128))])])]),_:1})]),tableActionRow:r(t=>[t.field=="action"?(i(),h("div",ze,[a(j,{disabled:!t.row.authorizations.update,onClick:P=>e.handleEdit(t.row.id),class:"me-2",rounded:"rounded-lg",colors:"bg-green-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-green-100",focus:"focus:outline-none focus:ring focus:ring-green-200"},{default:r(()=>[a(b,{theme:"text-white dark:text-primary-900",name:"editPencil",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"]),a(j,{disabled:!t.row.authorizations.delete,onClick:P=>e.confirmDeleteClicked(t.row.id),rounded:"rounded-lg",colors:"bg-red-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-red-100",focus:"focus:outline-none focus:ring focus:ring-red-200"},{default:r(()=>[a(b,{theme:"text-white dark:text-primary-900",name:"trash",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"]),a(z,{ref:"ps_danger_dialog"},null,512)])):f("",!0)]),tableRow:r(t=>[t.field==e.itmPurchasedOption+"@@name"?(i(),h("span",Ee,[t.row[e.itmPurchasedOption+"@@name"]?(i(),w(B,{key:0,class:""},{default:r(()=>[u(c(t.row[e.itmPurchasedOption+"@@name"]),1)]),_:2},1024)):f("",!0)])):f("",!0),t.field==e.itmItemType+"@@name"?(i(),h("span",Ne,[t.row[e.itmItemType+"@@name"]?(i(),w(B,{key:0,theme:"text-red-500 bg-red-100",class:""},{default:r(()=>[u(c(t.row[e.itmItemType+"@@name"]),1)]),_:2},1024)):f("",!0)])):f("",!0),t.field==e.itmConditionOfItem+"@@name"?(i(),h("span",Ue,[t.row[e.itmConditionOfItem+"@@name"]?(i(),w(B,{key:0,theme:"text-red-500 bg-red-100",class:""},{default:r(()=>[u(c(t.row[e.itmConditionOfItem+"@@name"]),1)]),_:2},1024)):f("",!0)])):f("",!0),t.field=="status"&&t.row.status==0?(i(),w(o,{key:3},{default:r(()=>[a(o,{class:"whitespace-nowrap dark:text-white"},{default:r(()=>[a(o,{class:"flex flex-row",textColor:"text-yellow-500"},{default:r(()=>[a(o,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-yellow-500"}),u(" "+c(e.$t("core__be_waiting_for_approval")),1)]),_:1})]),_:1})]),_:1})):f("",!0),t.field=="status"&&t.row.status==1?(i(),w(o,{key:4},{default:r(()=>[a(o,{class:"whitespace-nowrap dark:text-white"},{default:r(()=>[a(o,{class:"flex flex-row",textColor:"text-green-600"},{default:r(()=>[a(o,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-green-600"}),u(" "+c(e.$t("core__be_approved")),1)]),_:1})]),_:1})]),_:1})):f("",!0),t.field=="status"&&t.row.status==2?(i(),w(o,{key:5},{default:r(()=>[a(o,{class:"whitespace-nowrap dark:text-white"},{default:r(()=>[a(o,{class:"flex flex-row",textColor:"text-red-500"},{default:r(()=>[a(o,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-red-500"}),u(" "+c(e.$t("core__be_rejected")),1)]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1},8,["row","search","object","colFilterOptions","columns","sort_field","sort_order","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable","globalSearchPlaceholder"])]),_:1})],64)}var it=ke(Se,[["render",Le]]);export{it as default};
