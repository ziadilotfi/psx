import{e as T,f as N,P as U,a as E,d as L}from"./PsLayout.dfd88468.js";import{d as M,H as P,ag as V,ac as f,i as l,r as a,o as s,c as p,b as o,w as r,f as i,p as _,t as m,g as n,a as j,F as z,q,n as A}from"./app.17cd73cb.js";import{P as G}from"./PsButton.e57c4d7d.js";import{P as J}from"./PsBannerIcon.71d1b60f.js";import{P as K}from"./PsBreadcrumb2.49a3f56a.js";import{P as Q}from"./PsIcon.05949a2a.js";import{D as W}from"./PsTableSearch.4ca5ffa6.js";import{P as X}from"./PsIconButton.af329d7a.js";import{P as Y}from"./PsLabel.22ffb702.js";import{P as Z}from"./PsLink1.148ec573.js";import{b as x}from"./PsModal.bee9bcb9.js";import{P as ee}from"./PsTable2.559b3bb1.js";import{P as te}from"./PsRating.c16aeec3.js";import{D as re}from"./DatePicker.55e143e0.js";import{_ as se}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsInputWithRightIcon.1f31b4ee.js";import"./PsIcon1.1b6f6944.js";import"./moment.9709ab41.js";const oe=M({name:"Index",components:{Head:P,PsButton:G,PsTextButton:T,PsBannerIcon:J,PsBreadcrumb2:K,PsDangerDialog:N,PsIcon:Q,PsDropdown:U,PsDropdownSelect:E,Dropdown:W,PsIconButton:X,PsLabel:Y,PsLink1:Z,PsToggle:x,PsTable2:ee,PsRating:te,DatePicker:re},layout:L,props:{can:Object,status:Object,users:Object,roles:Object,customizeHeaders:Object,customizeDetails:Object,hideShowFieldForFilterArr:Object,showCoreAndCustomFieldArr:Object,selectedRole:{type:String,default:""},authUser:Object,usrIsVerifyBlueMark:String,uis:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String},methods:{handleCreate(){this.$inertia.get(route("user.create"))},handleEdit(e){this.$inertia.get(route("user.edit",e))},handlePublish(e,u){u&&this.$inertia.put(route("user.statusChange",e))},FilterOptionshandle(e){V.Inertia.post(route("user.screenDisplayUiSetting.store"),{value:e,sort_field:this.sort_field,sort_order:this.sort_order,row:this.users.per_page,search:this.search.value,current_page:this.users.current_page},{preserveScroll:!0,preserveState:!0})}},created(){this.columns=this.showCoreAndCustomFieldArr.map(e=>({action:e.action,field:e.field,label:f(e.label),sort:e.sort,type:e.type})),this.colFilterOptions=this.hideShowFieldForFilterArr.map(e=>({hidden:e.hidden,id:e.id,key:f(e.key),key_id:e.key_id,label:f(e.label),module_name:e.module_name}))},computed:{breadcrumb(){return[{label:f("core__be_dashboard_label"),url:route("admin.index")},{label:f("user_module"),color:"text-primary-500"}]}},setup(e){const u=l(!1),H=l(!1);let v=l(!1),S=e.search?l(e.search):l(""),D=e.sort_field?l(e.sort_field):l(""),w=e.sort_order?l(e.sort_order):l("desc"),y=e.selectedRole?l(e.selectedRole):l(""),k=e.selectedDate?l(e.selectedDate):l("");const g=l();let c=l();const C=l();function h(t){C.value.openModal(f("core__be_delete_user"),f("delete_user_msg"),f("core__be_btn_confirm"),f("core__be_btn_cancel"),()=>{V.Inertia.delete(route("user.destroy",t),{onSuccess:()=>{v.value=!0,setTimeout(()=>{v.value=!1},3e3)},onError:()=>{v.value=!0,setTimeout(()=>{v.value=!1},3e3)}})},()=>{})}function F(t){this.$inertia.put(route("user.ban",t))}function O(t){D.value=t.field,w.value=t.sort_order,b()}function B(t){y.value=t,b(1)}function $(t){k.value=t,b(1)}function R(t){S.value=t,b(1)}function I(t){b(1,t)}function b(t=null,d=null){V.Inertia.get(route("user.index"),{sort_field:D.value,sort_order:w.value,page:t!=null?t:e.users.meta.current_page,row:d!=null?d:e.users.meta.per_page,search:S.value,role_filter:y.value,date_filter:k.value},{preserveScroll:!0,preserveState:!0})}return{handleBanUser:F,showFilter:u,clearFilter:H,columns:c,confirmDeleteClicked:h,ps_danger_dialog:C,colFilterOptions:g,visible:v,handleSorting:O,handleSearchingSorting:b,handleRolefilter:B,handleDatefilter:$,handleRow:I,handleSearching:R,selected_role:y,selected_date:k}}}),le={class:"rounded-md shadow-xs w-56"},ae={class:"pt-2 z-30"},ne=["onClick"],de={key:0,class:"flex flex-row"},ie={key:1,class:"flex flex-row"},ue={key:2},ce={key:3,class:""},_e={key:0,class:"flex flex-row"};function me(e,u,H,v,S,D){const w=a("Head"),y=a("ps-breadcrumb-2"),k=a("ps-banner-icon"),g=a("ps-icon"),c=a("ps-button"),C=a("ps-dropdown-select"),h=a("ps-label"),F=a("ps-dropdown"),O=a("date-picker"),B=a("ps-rating"),$=a("ps-toggle"),R=a("ps-danger-dialog"),I=a("ps-table2"),b=a("ps-layout");return s(),p(z,null,[o(w,{title:e.$t("user_module")},null,8,["title"]),o(b,null,{default:r(()=>[o(y,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),e.visible?(s(),i(k,{key:0,visible:e.visible,theme:e.status.flag=="danger"?"bg-red-500":e.status.flag=="warning"?"bg-yellow-500":"bg-green-500",iconName:e.status.flag=="danger"?"close-circle":e.status.flag=="warning"?"alert-triangle":"rightalert",class:"text-white mb-5 sm:mb-6 lg:mb-8",iconColor:"white"},{default:r(()=>[_(m(e.status.msg),1)]),_:1},8,["visible","theme","iconName"])):n("",!0),o(I,{row:e.row,search:e.search,object:this.users,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,globalSearchPlaceholder:e.$t("core__be_search_user"),onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter},{button:r(()=>[e.can.createItem?(s(),i(c,{key:0,onClick:u[0]||(u[0]=t=>e.handleCreate()),rounded:"rounded-lg",type:"button",class:"flex flex-wrap items-center"},{default:r(()=>[o(g,{name:"plus",class:"me-1 font-semibold"}),_(" "+m(e.$t("core__be_add_user")),1)]),_:1})):n("",!0)]),responsive_button:r(()=>[e.can.createItem?(s(),i(c,{key:0,onClick:u[1]||(u[1]=t=>e.handleCreate()),rounded:"rounded-lg",type:"button",class:"flex flex-wrap items-center"},{default:r(()=>[o(g,{name:"plus",class:"me-1 font-semibold"}),_(" "+m(e.$t("core__be_add_user")),1)]),_:1})):n("",!0)]),searchRight:r(()=>[o(F,{align:"",class:"me-2 w-56 h-10"},{select:r(()=>[o(C,{placeholder:e.$t("core__be_role"),selectedValue:e.selected_role==""||e.selected_role=="all"?"":e.roles.filter(t=>t.id==e.selected_role)[0].name},null,8,["placeholder","selectedValue"])]),list:r(()=>[j("div",le,[j("div",ae,[j("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:u[2]||(u[2]=t=>e.handleRolefilter("all"))},[o(h,{class:"text-gray-200 ms-2"},{default:r(()=>[_(m(e.$t("core__be_select_all")),1)]),_:1})]),(s(!0),p(z,null,q(e.roles,t=>(s(),p("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:d=>e.handleRolefilter(t.id)},[o(h,{class:A(["ms-2",t.id==e.selected_role?" font-bold":""])},{default:r(()=>[_(m(t.name),1)]),_:2},1032,["class"])],8,ne))),128))])])]),_:1}),o(O,{onDatepick:e.handleDatefilter,class:A(["rounded shadow-sm pt-0.5 focus:outline-none focus:ring-1 focus:ring-primary-500",(e.selected_date==null||e.selected_date=="","w-full")]),value:e.selected_date,"onUpdate:value":u[3]||(u[3]=t=>e.selected_date=t),range:!0,inline:!1,autoApply:!1},null,8,["onDatepick","class","value"])]),tableRow:r(t=>[t.field==e.usrIsVerifyBlueMark?(s(),p("div",de,[o(h,{class:"whitespace-nowrap dark:text-white"},{default:r(()=>[t.row[e.usrIsVerifyBlueMark]==1?(s(),i(h,{key:0,class:"flex flex-row",textColor:"text-green-600"},{default:r(()=>[o(h,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-green-600"}),_(" "+m(e.$t("bluemarkuser__be_applied_label")),1)]),_:1})):(s(),i(h,{key:1,class:"flex flex-row"},{default:r(()=>[o(h,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-secondary-800 dark:bg-secondary-100"}),_(" "+m(e.$t("core__be_nomal_user")),1)]),_:1}))]),_:2},1024)])):n("",!0),t.field=="overall_rating"?(s(),p("div",ie,[o(B,{grade:t.row.overall_rating,hasCounter:!0},null,8,["grade"]),_(" "+m(t.row.overall_rating),1)])):n("",!0),t.field=="status"?(s(),p("div",ue,[t.row.user_is_sys_admin!=1?(s(),i($,{key:0,disabled:!t.row.authorizations.update,selectedValue:t.row.status==1,onClick:d=>e.handlePublish(t.row.id,t.row.authorizations.update),toggleOnTheme:"bg-primary-500 border-primary-500 "},null,8,["disabled","selectedValue","onClick"])):n("",!0),t.row.user_is_sys_admin==1?(s(),i($,{key:1,disabled:!0,selectedValue:t.row.status==1},null,8,["selectedValue"])):n("",!0)])):n("",!0),t.field=="is_banned"?(s(),p("span",ce,[t.row.is_banned!=1?(s(),i(c,{key:0,disabled:!t.row.authorizations.update||t.row.user_is_sys_admin==1,onClick:d=>e.handleBanUser(t.row.id),class:"w-16",border:"border border-red-500",rounded:"rounded",colors:"bg-white text-red-500",padding:"px-10 py-1",hover:"hover:bg-red-500 hover:text-white",focus:""},{default:r(()=>[_(m(e.$t("core__be_user_ban")),1)]),_:2},1032,["disabled","onClick"])):(s(),i(c,{key:1,disabled:!t.row.authorizations.update||t.row.user_is_sys_admin==1,class:"w-16",border:"border border-red-400",rounded:"rounded",colors:"bg-red-400 text-white",padding:"px-10 py-1",hover:"",focus:"",cursor:"cursor-not-allowed"},{default:r(()=>[_(m(e.$t("core__be_unban_lbl")),1)]),_:2},1032,["disabled"]))])):n("",!0)]),tableActionRow:r(t=>[t.field=="action"?(s(),p("div",_e,[t.row.user_is_sys_admin!=1?(s(),i(c,{key:0,disabled:!t.row.authorizations.update,onClick:d=>e.handleEdit(t.row.id),class:"me-2",rounded:"rounded-lg",colors:"bg-green-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-green-100",focus:"focus:outline-none focus:ring focus:ring-green-200"},{default:r(()=>[o(g,{theme:"text-white dark:text-primary-900",name:"editPencil",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"])):n("",!0),t.row.user_is_sys_admin!=1?(s(),i(c,{key:1,disabled:!t.row.authorizations.delete,onClick:d=>e.confirmDeleteClicked(t.row.id),rounded:"rounded-lg",colors:"bg-red-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-red-100",focus:"focus:outline-none focus:ring focus:ring-red-200"},{default:r(()=>[o(g,{theme:"text-white dark:text-primary-900",name:"trash",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"])):n("",!0),t.row.user_is_sys_admin==1?(s(),i(c,{key:2,disabled:e.authUser.id!=1,onClick:d=>e.handleEdit(t.row.id),class:"me-2",rounded:"rounded-lg",colors:"bg-green-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-green-100",focus:"focus:outline-none focus:ring focus:ring-green-200"},{default:r(()=>[o(g,{theme:"text-white dark:text-primary-900",name:"editPencil",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"])):n("",!0),t.row.user_is_sys_admin==1?(s(),i(c,{key:3,disabled:!0,onClick:d=>e.confirmDeleteClicked(t.row.id),rounded:"rounded-lg",colors:"bg-red-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-red-100",focus:"focus:outline-none focus:ring focus:ring-red-200"},{default:r(()=>[o(g,{theme:"text-white dark:text-primary-900",name:"trash",w:"16",h:"16"})]),_:2},1032,["onClick"])):n("",!0),o(R,{ref:"ps_danger_dialog"},null,512)])):n("",!0)]),_:1},8,["row","search","object","colFilterOptions","columns","sort_field","sort_order","globalSearchPlaceholder","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable"])]),_:1})],64)}var Ve=se(oe,[["render",me]]);export{Ve as default};
