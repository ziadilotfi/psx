import{h as Y,g as G,f as J,a as K,P as Q,d as X}from"./PsLayout.dfd88468.js";import{d as ee,H as oe,L as se,i as n,C as te,ac as o,r as d,o as l,c as _,b as t,w as r,a as c,p as b,t as g,f as y,F as M,q as j,n as O,g as V,aB as P,ag as v}from"./app.17cd73cb.js";import{h as ae}from"./moment.9709ab41.js";import{P as re}from"./PsBannerIcon.71d1b60f.js";import{P as le}from"./PsInput.1d284888.js";import{P as ie}from"./PsLabel.22ffb702.js";import{P as ne}from"./PsButton.e57c4d7d.js";import{P as de}from"./PsTextarea.a073ad3a.js";import{P as ce}from"./PsLabelHeader4.58b3b4f9.js";import{P as _e}from"./PsIcon.05949a2a.js";import{b as pe}from"./PsModal.bee9bcb9.js";import{P as me}from"./PsBreadcrumb2.49a3f56a.js";import{P as ue}from"./PsCard.ad8f8108.js";import{P as fe}from"./PsInputWithRightIcon.1f31b4ee.js";import{a as be,P as ge}from"./PsLicenseActivateModal.a7ebfdd7.js";import{P as he}from"./PsSuccessDialog.bd16d8a1.js";import{P as ve}from"./PsConfirmDialog.ac357cb9.js";import{_ as ye}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsIcon1.1b6f6944.js";import"./PsLoading.6ac4d83e.js";import"./PsLabelCaption.88f9aeab.js";const ke=ee({name:"Index",components:{Head:oe,Link:se,PsInput:le,PsLabel:ie,PsErrorDialog:Y,PsBannerIcon:re,PsButton:ne,PsTextarea:de,PsLabelHeader4:ce,PsIcon:_e,PsConfirmDialog:ve,PsWarningDialog:G,PsDangerDialog:J,PsToggle:pe,PsBreadcrumb2:me,PsCard:ue,PsInputWithRightIcon:fe,PsSuccessDialog:he,PsLoadingCircleDialog:be,PsDropdownSelect:K,PsDropdown:Q,PsLicenseActivateModal:ge},layout:X,props:["purchaseCodeOrUrlNotSame","project","errors","purchased_code","status","logMessages","needRefresh","hasError","activatedFileName","selectedZipFileName","zipFileName","can","tableUsedTypes","tableUsedTypeId","status","tables","importSuccessMsg","importedFileName","diffIds","recentImportedFileName","search","loadMore","sorting","baseProjectSameMsg","baseProjectNotSameMsg"],setup(e){const m=n(),S=e.sorting==0?n(!1):n(!0),k=e.search?n(e.search):n(""),F=e.loadMore==0?n(!1):n(!0),D=n(),i=n(),N=n(),f=n(),p=n(),u=e.tableUsedTypeId?n(e.tableUsedTypeId):n(99);let w=n();const I=n(),T=n();function L(){let a=o("core__be_btn_reload");N.value.openModal(o("core__be_awesome_title"),o("core__be_impport_success_note"),a,()=>{window.location.reload()},!1)}function $(a){const C=a.target.files;w.value=C[0],f.value.openModal(o("core__be_import_confimation_title"),o("core__be_import_confimation_note"),o("core__be_btn_confirm"),o("btn_cancel"),()=>{U(w.value)},()=>{})}function B(a){f.value.openModal(o("core__be_import_confirmation"),o("core__be_want_import_zip_file"),o("core__be_btn_confirm"),o("core__be_btn_cancel"),()=>{x(a)},()=>{})}function x(a){let C=P({selectedFileName:a});i.value.openModal(o("core__be_importing_title"),o("core__be_importing_note")),v.Inertia.post(route("table.import.zip"),C,{onBefore:()=>{i.value.openModal(o("core__be_importing_title"),o("core__be_importing_note"))},onSuccess:q=>{i.value.closeModal()},onError:()=>{i.value.closeModal()}})}function U(a){let C=P({zipFile:a,zipFileName:a.name});i.value.openModal(o("core__be_importing_title"),o("core__be_importing_note")),v.Inertia.post(route("table.import.zip"),C,{onBefore:()=>{i.value.openModal(o("core__be_importing_title"),o("core__be_importing_note"))},onSuccess:q=>{i.value.closeModal()},onError:()=>{i.value.closeModal()}})}function z(){N.value.openModal(o("license_activation_success"),o("license_activation_success_finish_msg"),o("setup_project"),()=>{let a=P({zipFileName:e.zipFileName});this.$inertia.get(route("table.index"),a)},!1)}function A(a){I.value.openModal(o("core__be_error_import_title"),a,o("core__be_btn_ok"),()=>{})}function E(){p.value.openModal(o("core__be_overwrite_table_title"),o("core__be_overwrite_table_note"),o("core__be_btn_confirm"),o("btn_cancel"),()=>{let a=P({diffIds:e.diffIds,recentImportedFileName:e.recentImportedFileName});v.Inertia.post(route("table.field.override"),a,{onBefore:()=>{i.value.openModal(o("core__be_importing_title"),o("core__be_importing_note"))},onSuccess:C=>{i.value.closeModal()},onError:()=>{i.value.closeModal()}})},()=>{let a=P({recentImportedFileName:e.recentImportedFileName});v.Inertia.post(route("table.field.override"),a,{onBefore:()=>{i.value.openModal(o("core__be_importing_title"),o("core__be_importing_note"))},onSuccess:()=>{i.value.closeModal()},onError:()=>{i.value.closeModal()}})})}function s(a){this.$inertia.get(route("tables.fields.index",[a]),{symbol:localStorage.activeLanguage?localStorage.activeLanguage:"en"})}function h(){p.value.openModal(o("core__be_replace_table_title"),o("core__be_replace_table_note"),o("core__be_btn_confirm"),o("btn_cancel"),()=>{let a=P({importedFileName:e.importedFileName});v.Inertia.post(route("table.field.handleProjectNotSame"),a)},()=>{})}function H(){v.Inertia.get(route("table.index"),{sorting:S.value==!1?0:1,loading:F.value==!1?0:1,search:k.value,tableUsedTypeId:u.value})}function Z(){T.value.openModal(o("pls_activate_your_app"),"You have successfully imported the file.","Back",()=>{},!1)}te(k,a=>{setTimeout(()=>{v.Inertia.get(route("table.index"),{sorting:S.value==!1?0:1,loading:F.value==!1?0:1,search:k.value,tableUsedTypeId:u.value})},2e3)});function R(a){u.value=a,v.Inertia.get(route("table.index"),{sorting:S.value==!1?0:1,loading:F.value==!1?0:1,search:k.value,tableUsedTypeId:u.value})}function W(){D.value.click()}return{moment:ae,handleImport:$,usedTypeClicked:R,handleBaseProjectNotSame:A,ps_danger_dialog:m,ps_error_dialog:I,route,handleOverride:E,handleDetail:s,sortingClicked:H,isSorting:S,search:k,importClicked:W,importFile:D,ps_success_dialog:N,ps_loading_circle_dialog:i,handleBaseProjectSame:h,openSuccessDialog:L,ps_confirm_dialog:f,ps_warning_dialog:p,usedTypeSearch:u,handleAlreadySelectedImport:B,doAlreadySelectedImport:x,openLicenseActivateModal:Z,ps_license_activate_modal:T,openLicenseActivateSuccessDialog:z}},created(){},mounted(){this.zipFileName&&this.handleAlreadySelectedImport(this.zipFileName),this.purchaseCodeOrUrlNotSame&&this.openLicenseActivateModal(),this.hasError===0&&this.openLicenseActivateSuccessDialog()},beforeUpdate(){this.diffIds&&this.diffIds.length&&this.handleOverride(),this.purchaseCodeOrUrlNotSame&&this.openLicenseActivateModal(),this.hasError===0&&this.openLicenseActivateSuccessDialog(),this.baseProjectNotSameMsg&&this.handleBaseProjectNotSame(this.baseProjectNotSameMsg),this.baseProjectSameMsg&&this.handleBaseProjectSame(),this.importSuccessMsg&&this.openSuccessDialog(),this.zipFileName&&this.handleAlreadySelectedImport(this.zipFileName)},computed:{breadcrumb(){return[{label:o("core__be_dashboard_label"),url:route("admin.index")},{label:o("table_setting_group"),color:"text-primary-500"}]}}}),we={class:"min-h-screen"},Ce={key:0,class:"flex justify-end"},Pe={key:1,class:"flex justify-end"},Se={class:"mt-4 sm:mt-6 lg:mt-10 mb-4 lg:mb-6 flex flex-col sm:flex-row justify-between"},Ne={class:"flex flex-row justify-between mb-4 sm:mb-0"},Ie={class:"flex sm:hidden"},Me={class:"rounded-md shadow-xs w-40"},Fe={class:"pt-2"},Te={key:0},xe=b("Create new currency"),je={key:1},De=["onClick"],Le={class:"flex flex-row"},$e={class:"sm:flex hidden me-4"},Be={class:"rounded-md shadow-xs w-40"},Ue={class:"pt-2"},ze={key:0},Ae=b("Create new currency"),Ee={key:1},Oe=["onClick"],Ve={class:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-6"},He=["onClick"],Ze={class:"pe-4 border-r border-secondary-200 flex items-center justify-center"},Re={class:"flex-grow px-4"},We={class:"flex space-x-1 mt-1"},qe={key:2,class:"mt-6 lg:mt-8 flex items-center justify-end space-x-1"},Ye={class:"flex"};function Ge(e,m,S,k,F,D){const i=d("Head"),N=d("ps-breadcrumb-2"),f=d("ps-icon"),p=d("ps-label"),u=d("ps-button"),w=d("ps-dropdown-select"),I=d("ps-dropdown"),T=d("ps-input-with-right-icon"),L=d("Link"),$=d("ps-loading-circle-dialog"),B=d("ps-success-dialog"),x=d("ps-confirm-dialog"),U=d("ps-warning-dialog"),z=d("ps-error-dialog"),A=d("ps-license-activate-modal"),E=d("ps-layout");return l(),_(M,null,[t(i,{title:e.$t("table_setting_group")},null,8,["title"]),t(E,null,{default:r(()=>[c("div",we,[t(N,{items:e.breadcrumb,class:"mb-4 sm:mb-0"},null,8,["items"]),e.can.createTable&&e.activatedFileName.is_imported?(l(),_("div",Ce,[c("input",{type:"file",accept:".zip",ref:"importFile",style:{display:"none"},onChange:m[0]||(m[0]=s=>e.handleImport(s))},null,544),t(u,{onClick:e.importClicked,class:""},{default:r(()=>[t(f,{name:"plus",class:"mx-0.5 font-semibold"}),t(p,{textColor:"text-white"},{default:r(()=>[b(g(e.$t("import")),1)]),_:1})]),_:1},8,["onClick"])])):(l(),_("div",Pe,[t(u,{onClick:m[1]||(m[1]=s=>e.handleAlreadySelectedImport(e.activatedFileName.file)),class:"mb-0.5"},{default:r(()=>[t(f,{name:"plus",class:"mx-0.5 mt-1.5 font-semibold"}),t(p,{textColor:"text-white"},{default:r(()=>[b(g(e.$t("import")),1)]),_:1})]),_:1})])),c("div",Se,[c("div",Ne,[t(u,{onClick:e.sortingClicked,colors:"bg-background dark:bg-backgroundDark",border:"border-secondary-200 border dark:border-secondary-100",shadow:"shadow-sm",focus:"focus:outline-none",hover:"hover:outline-none hover:bg-secondary-200"},{default:r(()=>[t(f,{name:"sort",class:"cursor-pointer me-2"}),t(p,{textColor:"text-secondary-800 dark:text-secondary-100 text-sm"},{default:r(()=>[b(g(e.$t("core__be_sort_by_name")),1)]),_:1})]),_:1},8,["onClick"]),c("div",Ie,[t(I,{align:"",class:"w-40 h-10"},{select:r(()=>[e.usedTypeSearch==99?(l(),y(w,{key:0,class:"w-40",placeholder:"Choose Table Used Type",showCenter:!0,selectedValue:"Null (temp)"})):(l(),y(w,{key:1,class:"w-40",placeholder:"Choose Table Used Type",showCenter:!0,selectedValue:e.usedTypeSearch==""?"":e.tableUsedTypes.filter(s=>s.id==e.usedTypeSearch)[0].name},null,8,["selectedValue"]))]),list:r(()=>[c("div",Me,[c("div",Fe,[e.tableUsedTypes.length==null?(l(),_("div",Te,[t(p,{class:"p-2 flex",onClick:m[2]||(m[2]=s=>e.route("core_key_type.index"))},{default:r(()=>[xe]),_:1})])):(l(),_("div",je,[(l(!0),_(M,null,j(e.tableUsedTypes,s=>(l(),_("div",{key:s.id,class:"w-40 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:h=>e.usedTypeClicked(s.id)},[t(p,{class:O(["ms-2",s.id==e.usedTypeSearch?" font-bold":""])},{default:r(()=>[b(g(s.name),1)]),_:2},1032,["class"])],8,De))),128))]))])])]),_:1})])]),c("div",Le,[c("div",$e,[t(I,{align:"",class:"w-40 h-10"},{select:r(()=>[t(w,{class:"w-40",placeholder:"Choose Table Used Type",showCenter:!0,selectedValue:e.usedTypeSearch==""?"":e.tableUsedTypes.filter(s=>s.id==e.usedTypeSearch)[0].name},null,8,["selectedValue"])]),list:r(()=>[c("div",Be,[c("div",Ue,[e.tableUsedTypes.length==null?(l(),_("div",ze,[t(p,{class:"p-2 flex",onClick:m[3]||(m[3]=s=>e.route("core_key_type.index"))},{default:r(()=>[Ae]),_:1})])):(l(),_("div",Ee,[(l(!0),_(M,null,j(e.tableUsedTypes,s=>(l(),_("div",{key:s.id,class:"w-40 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:h=>e.usedTypeClicked(s.id)},[t(p,{class:O(["ms-2",s.id==e.usedTypeSearch?" font-bold":""])},{default:r(()=>[b(g(s.name),1)]),_:2},1032,["class"])],8,Oe))),128))]))])])]),_:1})]),t(T,{value:e.search,"onUpdate:value":m[4]||(m[4]=s=>e.search=s),class:"w-full sm:w-80",rounded:"rounded-lg",placeholder:e.$t("core__be_search")},{icon:r(()=>[t(f,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),c("div",Ve,[(l(!0),_(M,null,j(e.tables.data,s=>(l(),_("div",{onClick:h=>e.handleDetail(s.id),key:s.id,class:"cursor-pointer border border-secondary-200 shadow-sm rounded flex flex-row p-4"},[c("div",Ze,[t(f,{name:"box",theme:"text-secondary-800"})]),c("div",Re,[t(p,{class:"text-lg"},{default:r(()=>[b(g(s.name),1)]),_:2},1024),c("div",We,[t(p,{class:"bg-blue-100 dark:bg-primary-800 p-1 rounded text-xs",textColor:"text-blue-800 dark:text-blue-100"},{default:r(()=>[b(g(e.$t("core__be_core_fields")),1)]),_:1}),s.is_only_for_core_field!=1?(l(),y(p,{key:0,class:"bg-yellow-100 p-1 rounded text-xs",textColor:"text-yellow-800"},{default:r(()=>[b(g(e.$t("core__be_custom_fields")),1)]),_:1})):V("",!0)])])],8,He))),128))]),Object.keys(e.tables.data).length>0?(l(),_("div",qe,[(l(!0),_(M,null,j(e.tables.meta.links,(s,h)=>(l(),y(L,{key:h,href:s.url?s.url:"",class:"h-8 rounded bg-white dark:bg-secondaryDark-black"},{default:r(()=>[c("div",Ye,[h==0?(l(),y(u,{key:0,hover:"",focus:"",colors:"bg-background dark:bg-backgroundDark hover:bg-secondary-100",class:"mt-0.5",padding:"py-2 px-2",border:"border border-secodnary-200 dark:border-secodnary-100 "},{default:r(()=>[t(f,{name:"doubleArrowLeft",w:"16",h:"16"})]),_:1})):h==Object.keys(e.tables.meta.links).length-1?(l(),y(u,{key:1,colors:"bg-background dark:bg-backgroundDark hover:bg-secondary-100",class:"mt-0.5",padding:"py-2 px-2",hover:"",focus:"",border:"border border-secodnary-200  dark:border-secodnary-100"},{default:r(()=>[t(f,{name:"doubleArrowRight",w:"16",h:"16"})]),_:1})):(l(),y(u,{key:2,rounded:"rounded",colors:"bg-white",border:"border border-gray-200 rounded",class:O(s.active?"bg-indigo-500 text-white":"hover:text-gray-500 hover:bg-gray-200"),padding:"py-2 px-4"},{default:r(()=>[b(g(s.label),1)]),_:2},1032,["class"]))])]),_:2},1032,["href"]))),128))])):V("",!0)]),t($,{ref:"ps_loading_circle_dialog"},null,512),t(B,{ref:"ps_success_dialog"},null,512),t(x,{ref:"ps_confirm_dialog"},null,512),t(U,{ref:"ps_warning_dialog"},null,512),t(z,{ref:"ps_error_dialog"},null,512),t(A,{selectedZipFileName:e.selectedZipFileName,isCountDownShow:!1,hasError:e.hasError,logMessages:e.logMessages,status:e.status,purchased_code:e.purchased_code,project:e.project,errors:e.errors,systemCode2:e.systemCode2,ref:"ps_license_activate_modal"},null,8,["selectedZipFileName","hasError","logMessages","status","purchased_code","project","errors","systemCode2"])]),_:1})],64)}var ho=ye(ke,[["render",Ge]]);export{ho as default};
