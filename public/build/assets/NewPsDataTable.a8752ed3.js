import{P as N}from"./PsLabel.22ffb702.js";import{P as T}from"./PsIcon.05949a2a.js";import{P as V,a as A,e as z}from"./PsLayout.dfd88468.js";import{N as j}from"./PsTable2.559b3bb1.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import{r as b,o as a,c as r,a as n,b as c,w as o,p as h,t as u,F as m,q as v,n as H,f as F,g as C,l as P,m as M,v as B}from"./app.17cd73cb.js";import{P as U}from"./PsTableSearch.4ca5ffa6.js";import{P as q}from"./PsInputWithRightIcon.4c565b4c.js";import{h as E}from"./moment.9709ab41.js";const O={name:"NewPsTableSearch",components:{PsDropdown:V,PsDropdownSelect:A,PsIcon:T,NewDropdown:j,PsLabel:N},props:["perPageOptions","colFilterOptions"],data(){return{page:1,perPage:this.perPageOptions[0]}}},W={class:"flex justify-between mt-10"},G={class:"flex"},J={class:"flex flex-row"},K={class:"rounded-md shadow-xs w-24"},Q={class:"z-30"},X=["onClick"],Y={class:"flex gap-2"},Z={class:"mr-2 relative flex justify-center items-center rounded w-10 h-10 bg-primary-500"};function $(i,f,s,p,t,y){const _=b("ps-label"),d=b("ps-dropdown-select"),k=b("ps-dropdown"),S=b("ps-icon"),R=b("new-dropdown");return a(),r(m,null,[n("div",W,[n("div",G,[c(k,{align:"left",class:"me-4",h:"h-46"},{select:o(()=>[n("div",J,[c(_,{class:"my-auto font-bold me-2"},{default:o(()=>[h(u(i.$t("core__be_show"))+":\xA0",1)]),_:1}),c(d,{placeholder:i.$t("core__be_show"),selectedValue:t.perPage+" "+i.$t("core__be_rows"),class:"text-red-600 light:font-bold w-29 h-10"},null,8,["placeholder","selectedValue"])])]),list:o(()=>[n("div",K,[n("div",Q,[(a(!0),r(m,null,v(s.perPageOptions,(w,L)=>(a(),r("div",{key:L,class:H(t.perPage!=w?"w-32 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center":""),onClick:e=>[t.perPage=w,i.setPerPage(w)]},[t.perPage!=w?(a(),F(_,{key:0,class:"ms-2"},{default:o(()=>[h(u(w)+" "+u(i.$t("core__be_rows")),1)]),_:2},1024)):C("",!0)],10,X))),128))])])]),_:1}),P(i.$slots,"searchLeft")]),n("div",Y,[P(i.$slots,"searchRight"),c(R,{align:"left",colFilterOptions:s.colFilterOptions,"onUpdate:colFilterOptions":f[0]||(f[0]=w=>s.colFilterOptions=w)},{select:o(()=>[n("div",Z,[c(S,{name:"eye-on",class:"cursor-pointer text-white dark:text-secondaryDark-black"})])]),_:1},8,["colFilterOptions"])])]),P(i.$slots,"searchOption",{class:"mt-4"})],64)}var ee=I(O,[["render",$]]);const te={name:"NewPsDataTable",components:{PsLabel:N,PsIcon:T,PsTextButton:z,NewPsTableSearch:ee,PsPagination:U,PsDropdown:V,PsDropdownSelect:A,PsInputWithRightIcon:q},props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},perPageOptions:{type:Array,default:[10,25,50,100]},sortable:{type:Boolean,default:!0},colFilterOptions:{type:Array,default:[]},searchable:{type:Boolean,default:!1},searchRightable:{type:Boolean,default:!1},searchOptions:{type:Array,default:[]},globalSearchFields:{type:Array,default:[]},globalSearchPlaceholder:{type:String,default:"Search"},searchHide:{type:Boolean,default:!1},searchRightHide:{type:Boolean,default:!1}},data(){return{searchterm:"",selectedValue:0,searchedData:{},filterOptions:this.searchOptions,sortedData:{},tableData:this.rows,globalSearch:this.globalSearchFields,pagination:{page:1,perPage:this.perPageOptions[0]},totalRecords:this.rows.length,moment:E,clearFilter:!1,sortType:"desc"}},computed:{filteredList(){if(this.clearFilter==!0&&(this.searchedData={}),this.tableData=this.rows,this.searchterm&&(this.tableData=this.tableData.filter(s=>{let p=!1;for(let t=0;t<this.globalSearch.length;t++)if(s[this.globalSearch[t]].toLowerCase().replace(/\s+/g," ").trim().includes(this.searchterm.toLowerCase().replace(/\s+/g," ").trim())){p=!0;break}else p=!1;return!!p})),this.searchedData)for(let s of this.searchOptions)s.filterType=="dropdown"&&s.checkFieldMain in this.searchedData&&s.checkFieldMain!=""&&s.checkFieldMain!=0&&this.searchedData[s.checkFieldMain]!=""&&this.searchedData[s.checkFieldMain]!=0&&(this.tableData=this.tableData.filter(p=>p[s.checkFieldMain]==this.searchedData[s.checkFieldMain]));if(this.sortable==!0&&this.sortedData!=null){let s=this.columns.length;for(let p=s-1;p>=0;p--){let t=this.columns[p];t.field in this.sortedData&&(this.sortedData[t.field].type=="String"&&("relation"in t?this.tableData=this.tableData.sort((y,_)=>{let d=y[t.relation][t.relationField].toLowerCase(),k=_[t.relation][t.relationField].toLowerCase();return d<k?-1:d>k?1:0}):this.tableData=this.tableData.sort((y,_)=>{let d=y[t.field].toLowerCase(),k=_[t.field].toLowerCase();return d<k?-1:d>k?1:0}),this.sortedData[t.field].orderBy=="desc"&&(this.tableData=this.tableData.reverse())),(this.sortedData[t.field].type=="Integer"||this.sortedData[t.field].type=="Boolean")&&(this.tableData=this.tableData.sort((y,_)=>y[t.field]-_[t.field]),this.sortedData[t.field].orderBy=="desc"&&(this.tableData=this.tableData.reverse())),this.sortedData[t.field].type=="Date"&&(this.tableData=this.tableData.sort((y,_)=>new Date(y[t.field]).getTime()-new Date(_[t.field]).getTime()),this.sortType=="desc"&&(this.tableData=this.tableData.reverse())))}}this.totalRecords=this.tableData.length;const i=(this.pagination.page-1)*this.pagination.perPage,f=this.pagination.page*this.pagination.perPage;return this.tableData.slice(i,f)}},methods:{handleSorting(i){let f={},s=i.field,p=i.type;this.sortedData==null?f={orderBy:"asc",type:p}:s in this.sortedData?this.sortedData[s].orderBy=="asc"?f={orderBy:"desc",type:p}:f={orderBy:"asc",type:p}:f={orderBy:"asc",type:p},this.sortedData={},this.sortedData[s]=f}}},se={class:"rounded-md shadow-xs w-56"},le={class:"pt-2 z-30"},ae={key:0},ie=h("No data yet!"),oe={key:1},re=["onClick"],ne=["onClick"],de={class:"grid grid-cols-4 gap-2 mt-4"},ce={class:"rounded-md shadow-xs w-56"},he={class:"pt-2 z-30"},pe={key:0},fe=h("No data yet!"),ue={key:1},_e=["onClick"],ye=["onClick"],be={class:"overflow-x-auto"},ge={class:"table-auto w-full mt-10"},me={class:"bg-primary-500 text-white dark:text-black text-2xl justify-content"},ke=h("Action"),we=h("No"),De={class:"bg-white divide-y divide-gray-200 dark:bg-secondaryDark-black dark:divide-white border-b border-t"},ve={class:"py-2 pl-4"},Fe={key:0},Pe={class:"pb-2 pt-4 px-4 text-sm font-medium whitespace-nowrap dark:text-slate-500 text-slate-400 text-center border-b border-t",colspan:"20"};function xe(i,f,s,p,t,y){const _=b("ps-dropdown-select"),d=b("ps-label"),k=b("ps-dropdown"),S=b("ps-icon"),R=b("ps-input-with-right-icon"),w=b("new-ps-table-search"),L=b("ps-pagination");return a(),r(m,null,[s.searchHide?C("",!0):(a(),F(w,{key:0,perPageOptions:s.perPageOptions,colFilterOptions:s.colFilterOptions},{searchLeft:o(()=>[P(i.$slots,"searchLeft")]),searchRight:o(()=>[P(i.$slots,"searchRight"),s.searchRightable?(a(!0),r(m,{key:0},v(s.searchOptions,(e,g)=>(a(),r("div",{key:g},[e.filterType=="dropdown"?(a(),F(k,{key:0,align:"left",class:"w-56 h-10"},{select:o(()=>[c(_,{placeholder:e.placeholder,showCenter:!0,selectedValue:e.checkFieldMain in t.searchedData&&t.searchedData[e.checkFieldMain]!=""?e.options.filter(l=>l[e.checkFieldOption]==t.searchedData[e.checkFieldMain])[0][e.displayField]:""},null,8,["placeholder","selectedValue"])]),list:o(()=>[n("div",se,[n("div",le,[e.options.length==null?(a(),r("div",ae,[c(d,{class:"p-2 flex"},{default:o(()=>[ie]),_:1})])):(a(),r("div",oe,[n("div",{onClick:l=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]="","sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?i.subOptions[e.sub_options.options]={}:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c(d,null,{default:o(()=>[h(u(i.$t("core__be_all")),1)]),_:1})],8,re),(a(!0),r(m,null,v(e.options,(l,x)=>(a(),r("div",{key:x,onClick:D=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]=l[e.checkFieldOption],"sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?i.subOptions[e.sub_options.options]=l[e.sub_options.options]:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c(d,null,{default:o(()=>[h(u(l[e.displayField]),1)]),_:2},1024)],8,ne))),128))]))])])]),_:2},1024)):C("",!0)]))),128)):C("",!0),c(R,{placeholderColor:"placeholder-secondary-700 dark:placeholder-white",theme:"bg-secondary-100 dark:bg-backgroundDark ",class:"w-60 h-10 rounded-full flex",value:t.searchterm,"onUpdate:value":f[0]||(f[0]=e=>t.searchterm=e),placeholder:s.globalSearchPlaceholder},{icon:o(()=>[c(S,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])]),searchOption:o(()=>[M(n("div",de,[(a(!0),r(m,null,v(s.searchOptions,(e,g)=>(a(),r("div",{key:g},[e.filterType=="dropdown"?(a(),F(k,{key:0,align:"left",class:"w-full"},{select:o(()=>[c(_,{placeholder:e.placeholder,showCenter:!0,selectedValue:e.checkFieldMain in t.searchedData&&t.searchedData[e.checkFieldMain]!=""?e.options.filter(l=>l[e.checkFieldOption]==t.searchedData[e.checkFieldMain])[0][e.displayField]:""},null,8,["placeholder","selectedValue"])]),list:o(()=>[n("div",ce,[n("div",he,[e.options.length==null?(a(),r("div",pe,[c(d,{class:"p-2 flex"},{default:o(()=>[fe]),_:1})])):(a(),r("div",ue,[n("div",{onClick:l=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]="","sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?i.subOptions[e.sub_options.options]={}:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c(d,null,{default:o(()=>[h(u(i.$t("core__be_all")),1)]),_:1})],8,_e),(a(!0),r(m,null,v(e.options,(l,x)=>(a(),r("div",{key:x,onClick:D=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]=l[e.checkFieldOption],"sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?i.subOptions[e.sub_options.options]=l[e.sub_options.options]:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c(d,null,{default:o(()=>[h(u(l[e.displayField]),1)]),_:2},1024)],8,ye))),128))]))])])]),_:2},1024)):C("",!0)]))),128))],512),[[B,s.searchable]])]),_:3},8,["perPageOptions","colFilterOptions"])),n("div",be,[n("table",ge,[n("thead",me,[n("tr",null,[n("th",null,[c(d,{textColor:"flex text-secondary-50 dark:text-secondary-900 font-semibold my-2 ms-6"},{default:o(()=>[ke]),_:1})]),n("th",null,[c(d,{textColor:"flex text-secondary-50 dark:text-secondary-900 font-semibold my-2 ms-3"},{default:o(()=>[we]),_:1})]),(a(!0),r(m,null,v(s.columns.filter(e=>e.field!="action"),e=>M((a(),r("th",{key:e.field},[c(d,{textColor:"flex text-secondary-50 dark:text-secondary-900 font-semibold my-2 ms-3 items-center"},{default:o(()=>[h(u(e.label)+" ",1),e.action=="Action"?(a(),F(S,{key:0,onClick:g=>y.handleSorting(e),name:e.field in t.sortedData&&t.sortedData[e.field].orderBy=="asc"?"upChervon":"downChervon",class:"ms-2",w:"16",h:"16"},null,8,["onClick","name"])):C("",!0)]),_:2},1024)])),[[B,s.colFilterOptions.filter(g=>g.key==e.field).length==0?!0:!s.colFilterOptions.filter(g=>g.key==e.field)[0].hidden]])),128))])]),n("tbody",De,[(a(!0),r(m,null,v(y.filteredList,(e,g)=>(a(),r("tr",{class:"hover:bg-gray-100 dark:hover:bg-gray-700",key:g},[(a(!0),r(m,null,v(s.columns.filter(l=>l.field=="action"),(l,x)=>M((a(),r("td",{key:x,class:"py-2 pl-4"},[P(i.$slots,"tableActionRow",{field:l.field,row:e},()=>[c(d,{class:"font-normal"},{default:o(()=>[h(u(i.$t(e[l.field])),1)]),_:2},1024)])])),[[B,s.colFilterOptions.filter(D=>D.key==l.field).length==0?!0:!s.colFilterOptions.filter(D=>D.key==l.field)[0].hidden]])),128)),n("td",ve,[c(d,null,{default:o(()=>[h(u(g+1+t.pagination.perPage*(t.pagination.page-1)),1)]),_:2},1024)]),(a(!0),r(m,null,v(s.columns.filter(l=>l.field!="action"),(l,x)=>M((a(),r("td",{key:x,class:"py-2 pl-4"},[P(i.$slots,"tableRow",{field:l.field,row:e},()=>["relation"in l?(a(),F(d,{key:0},{default:o(()=>[h(u(e[l.relation]?e[l.relation][l.relationField]:""),1)]),_:2},1024)):l.type=="Date"?(a(),F(d,{key:1},{default:o(()=>[h(u(e[l.field]?t.moment(e[l.field]).format(i.$page.props.dateFormat):""),1)]),_:2},1024)):(a(),F(d,{key:2,class:"font-normal"},{default:o(()=>[h(u(e[l.field]),1)]),_:2},1024))])])),[[B,s.colFilterOptions.filter(D=>D.key==l.field).length==0?!0:!s.colFilterOptions.filter(D=>D.key==l.field)[0].hidden]])),128))]))),128)),y.filteredList.length==0?(a(),r("tr",Fe,[n("td",Pe,[P(i.$slots,"emptyRow",{},()=>[h(u(i.$t("core__be_table_no_data")),1)])])])):C("",!0)])])]),M(c(L,{value:t.pagination,"onUpdate:value":f[1]||(f[1]=e=>t.pagination=e),totalRecords:t.totalRecords,perPageOptions:s.perPageOptions},null,8,["value","totalRecords","perPageOptions"]),[[B,s.rows.length>s.perPageOptions[0]]])],64)}var Ae=I(te,[["render",xe]]);export{Ae as N};
