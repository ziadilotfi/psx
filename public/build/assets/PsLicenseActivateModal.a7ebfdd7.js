import{P as V}from"./PsModal.bee9bcb9.js";import{P as W}from"./PsLoading.6ac4d83e.js";import{P as R}from"./PsLabel.22ffb702.js";import{P as H}from"./PsButton.e57c4d7d.js";import{d as X,i as n,ac as $,r as m,o as i,f,w as t,a as d,b as a,p as c,t as l,aB as T,ag as ie,c as b,g as p,F as O,q as de}from"./app.17cd73cb.js";import{P as re}from"./PsIcon.05949a2a.js";import{P as ce}from"./PsInput.1d284888.js";import{P as ue}from"./PsInputWithRightIcon.1f31b4ee.js";import{P as pe}from"./PsLabelCaption.88f9aeab.js";import{P as me}from"./PsBannerIcon.71d1b60f.js";import{P as fe}from"./PsConfirmDialog.ac357cb9.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";const _e=X({components:{PsModal:V,PsLabel:R,PsLoading:W,PsButton:H},setup(){const e=n(),s=n($("ps_loading_dialog__please_wait")),g=n($("ps_loading_dialog__loading"));function B(r,u){s.value=r,g.value=u,e.value.toggle(!0)}function U(){e.value.toggle(!1)}function E(r){g.value=r}return{psmodal:e,openModal:B,closeModal:U,message:g,setMessage:E,title:s}}}),be={class:"flex flex-row justify-center items-center text-center"},he={class:"flex flex-col justify-center items-center text-center"};function ve(e,s,g,B,U,E){const r=m("ps-loading"),u=m("ps-label"),F=m("ps-modal");return i(),f(F,{ref:"psmodal",maxWidth:"480px",isClickOut:!1,class:"z-50"},{title:t(()=>[d("div",be,[a(r,{theme:"border-6 border-t-6 border-secondary-200 border-t-primary-500",loadingSize:"h-20 w-20"})])]),body:t(()=>[d("div",he,[a(u,{class:"text-2xl mb-4"},{default:t(()=>[c(l(e.title),1)]),_:1}),a(u,{class:"text-base"},{default:t(()=>[c(l(e.message),1)]),_:1})])]),_:1},512)}var ge=G(_e,[["render",ve]]);const ke=X({name:"PsLicenseActivateModal",components:{PsModal:V,PsLabel:R,PsButton:H,PsIcon:re,PsInput:ce,PsLabelCaption:pe,PsBannerIcon:me,PsConfirmDialog:fe,PsLoadingCircleDialog:ge,PsInputWithRightIcon:ue,PsLoading:W},props:["hasError","selectedZipFileName","systemCode2","errors","status","project","purchased_code","logMessages","isCountDownShow"],setup(e){const s=n(),g=n($("ps_success_dialog__success")),B=n($("ps_success_dialog__success_message")),U=n($("ps_confirm_dialog__yes")),E=n(),r=n();let u;const F=n(!0);let k=n(!0),h=n(!1);const v=n(!1);let C=n(!0),y=n(!1),P=n(!1);const D=n(!1);let o=n(!0),M=n(!1),I=n(!1);const A=n();let L=n(e.selectedZipFileName),j=n("");function J(){u(),s.value.toggle(!1)}let z=T({backend_url:e.project.project_url,purchased_code:e.project.project_code}),K=new Date(e.systemCode2).getTime(),Q=setInterval(function(){let w=new Date().getTime(),_=K-w,S=Math.floor(_/(1e3*60*60*24)),N=Math.floor(_%(1e3*60*60*24)/(1e3*60*60)),Z=Math.floor(_%(1e3*60*60)/(1e3*60));j.value=S+"d : "+N+"hr : "+Z+"min",_<0&&(clearInterval(Q),k.value=!1,j.value="EXPIRED")},1e3);function q(){s.value.toggle(!1)}function Y(w,_,S,N,Z=!0){g.value=w,B.value=_.toString(),U.value=S,s.value.toggle(!0),u=N,F.value=Z}function x(){this.$inertia.post(route("admin.dashboard.updateLicense"),z,{onBefore:()=>{C.value=!0,y.value=!0,v.value=!1},onSuccess:()=>{y.value=!1,P.value=!0,setTimeout(()=>{P.value=!1,h.value=!1},3e3)},onError:()=>{P.value=!1,y.value=!1}})}function ee(){this.$inertia.post(route("admin.dashboard.updateLicense"),z,{onBefore:()=>{o.value=!0,M.value=!0,D.value=!1},onSuccess:()=>{M.value=!1,I.value=!0,setTimeout(()=>{I.value=!1,h.value=!1},3e3)},onError:()=>{I.value=!1,M.value=!1}})}function se(){v.value=!0,C.value=!1}function te(){D.value=!0,o.value=!1}function ae(){!D.value&&!M.value&&!I.value&&!v.value&&!y.value&&!P.value&&A.value.click()}function oe(w){k.value=!1;const _=w.target.files;L.value=_[0]}function le(){L.value="",k.value=!0}function ne(w,_=0){let S=T({zipFile:w,tableSetting:_});ie.Inertia.post(route("admin.dashboard.activateLicense"),S,{onBefore:()=>{r.value.openModal($("license_activating"),$("wait_msg"))},onSuccess:N=>{r.value.closeModal(),k.value=!0,e.hasError===0&&q()},onError:()=>{r.value.closeModal()}})}return{isClickOut:k,psmodal:s,title:g,message:B,openModal:Y,actionClicked:J,okButton:U,close:q,showIcon:F,form:z,handleUpdatePurchaseCode:x,visible:h,ps_confirm_dialog:E,importClicked:ae,handleImport:oe,importFile:A,ps_loading_circle_dialog:r,loadingPurchasedCode:y,isEditPurchasedCode:v,isDisablePurchasedCode:C,successPurchasedCode:P,handlePurchasedCodeEdit:se,loadingBackendUrl:M,isEditBackendUrl:D,isDisableBackendUrl:o,successBackendUrl:I,handleBackendUrlEdit:te,handleUpdateBackendUrl:ee,selectedFile:L,doImport:ne,clearSelectedFile:le,showcountDownDate:j}},computed:{isCanMakeAction(){return!(!this.isEditBackendUrl&&!this.loadingBackendUrl&&!this.successBackendUrl&&!this.isEditPurchasedCode&&!this.loadingPurchasedCode&&!this.successPurchasedCode)}}}),Ce={class:"flex justify-end mb-3"},ye={key:0,class:"flex flex-col"},Pe={class:"bg-primary-50 text-xl p-3 text-dark rounded w-full text-center mb-8"},we={class:"text-green-500 animate-pulse",id:"systemCode2"},$e={class:"w-full mt-6 px-4"},Be={class:"mb-6"},Ue={class:"mb-4"},Fe={class:""},De={class:"mb-6"},Ee={key:0,class:""},Me={key:1,class:""},Ie={key:2,class:""},Se={key:1,class:"mb-6 border rounded border-red-500 w-80 p-3"},Ne={class:""},Le={key:0,class:"flex mb-2"},je={class:"h-100"},ze={class:"text-red-500 text-base"},Ze={key:1,class:"flex mb-2"},Ae={class:"h-100"},qe={class:"text-green-500 text-base"},Te={class:"mb-6"},Oe={class:"mb-2"},Ve={target:"_blank",href:"https://share-docs.clickup.com/24312566/p/h/q5yqp-49543/a8f0164851b3c63/q5yqp-50183",class:"underline text-indigo-500"},We={class:""},Re={target:"_blank",href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",class:"underline text-indigo-500"};function He(e,s,g,B,U,E){const r=m("ps-icon"),u=m("ps-label"),F=m("ps-banner-icon"),k=m("ps-loading"),h=m("ps-button"),v=m("ps-input-with-right-icon"),C=m("ps-label-caption"),y=m("ps-modal"),P=m("ps-confirm-dialog"),D=m("ps-loading-circle-dialog");return i(),b(O,null,[a(y,{ref:"psmodal",maxWidth:"552px",bodyHeight:"100%",line:"hidden",isClickOut:!1,theme:" px-4 py-4 rounded-lg shadow-xl",class:"z-20"},{title:t(()=>[d("div",Ce,[e.isClickOut?(i(),f(r,{key:0,onClick:s[0]||(s[0]=o=>e.close()),name:"cross",theme:"text-secondary-400"})):p("",!0)]),e.isCountDownShow?(i(),b("div",ye,[d("div",Pe,[c(l(e.$t("your_free_trial_duration_left"))+" ",1),d("span",we,l(e.showcountDownDate),1)])])):p("",!0),a(u,{class:"font-medium text-xl lg:text-2xl px-4"},{default:t(()=>[c(l(e.title),1)]),_:1})]),body:t(()=>[d("div",$e,[e.visible?(i(),f(F,{key:0,visible:e.visible,theme:e.status.flag=="danger"?"bg-red-500":e.status.flag=="warning"?"bg-yellow-500":"bg-green-500",iconName:e.status.flag=="danger"?"close-circle":e.status.flag=="warning"?"alert-triangle":"rightalert",class:"text-white mb-8",iconColor:"white"},{default:t(()=>[c(l(e.status.msg),1)]),_:1},8,["visible","theme","iconName"])):p("",!0),d("div",Be,[d("div",Ue,[a(u,{class:"text-base mb-1"},{default:t(()=>[c(l(e.$t("installer_messages.environment.wizard.form.base_domain_label")),1)]),_:1}),a(v,{disabled:e.isDisableBackendUrl,value:e.form.backend_url,"onUpdate:value":s[3]||(s[3]=o=>e.form.backend_url=o),placeholder:e.$t("enter_backend_url")},{icon:t(()=>[e.loadingBackendUrl?(i(),f(k,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):p("",!0),e.successBackendUrl?(i(),f(u,{key:1,class:"transition-all duration-300",textColor:"text-dark dark:text-secondaryDark-black"},{default:t(()=>[c(l(e.$t("core__be_btn_saved")),1)]),_:1})):p("",!0),e.isEditBackendUrl&&!e.loadingBackendUrl&&!e.successBackendUrl?(i(),f(h,{key:2,onClick:s[1]||(s[1]=o=>e.handleUpdateBackendUrl()),class:"",padding:"p-0",colors:"text-primary-500",hover:""},{default:t(()=>[c(l(e.$t("core__be_btn_save")),1)]),_:1})):p("",!0),!e.isEditBackendUrl&&!e.loadingBackendUrl&&!e.successBackendUrl?(i(),f(r,{key:3,onClick:s[2]||(s[2]=o=>e.handleBackendUrlEdit()),name:"editPencil"})):p("",!0)]),_:1},8,["disabled","value","placeholder"]),a(C,{textColor:"text-red-500 ",class:"mt-2 block"},{default:t(()=>[c(l(e.errors.backend_url),1)]),_:1})]),d("div",Fe,[a(u,{class:"text-base mb-1"},{default:t(()=>[c(l(e.$t("purchase_code")),1)]),_:1}),a(v,{disabled:e.isDisablePurchasedCode,value:e.form.purchased_code,"onUpdate:value":s[6]||(s[6]=o=>e.form.purchased_code=o),placeholder:e.$t("enter_purchase_code")},{icon:t(()=>[e.loadingPurchasedCode?(i(),f(k,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):p("",!0),e.successPurchasedCode?(i(),f(u,{key:1,class:"transition-all duration-300",textColor:"text-dark dark:text-secondaryDark-black"},{default:t(()=>[c(l(e.$t("core__be_btn_saved")),1)]),_:1})):p("",!0),e.isEditPurchasedCode&&!e.loadingPurchasedCode&&!e.successPurchasedCode?(i(),f(h,{key:2,onClick:s[4]||(s[4]=o=>e.handleUpdatePurchaseCode()),class:"",padding:"p-0",colors:"text-primary-500",hover:""},{default:t(()=>[c(l(e.$t("core__be_btn_save")),1)]),_:1})):p("",!0),!e.isEditPurchasedCode&&!e.loadingPurchasedCode&&!e.successPurchasedCode?(i(),f(r,{key:3,onClick:s[5]||(s[5]=o=>e.handlePurchasedCodeEdit()),name:"editPencil"})):p("",!0)]),_:1},8,["disabled","value","placeholder"]),a(C,{textColor:"text-red-500 ",class:"mt-2 block"},{default:t(()=>[c(l(e.errors.purchased_code),1)]),_:1}),e.purchased_code?(i(),f(C,{key:0,textColor:"text-red-500 ",class:"mt-2 block"},{default:t(()=>[c(l(e.purchased_code),1)]),_:1})):p("",!0)])]),d("div",De,[a(u,{class:"text-base mb-1"},{default:t(()=>[c(l(e.$t("import_zip_file")),1)]),_:1}),e.selectedFile?(i(),b("div",Ee,[a(v,{class:"w-60 mb-3",disabled:!0,value:e.selectedFile.name,"onUpdate:value":s[8]||(s[8]=o=>e.selectedFile.name=o)},{icon:t(()=>[a(r,{onClick:s[7]||(s[7]=o=>e.clearSelectedFile()),name:"cross"})]),_:1},8,["value"]),a(h,{disabled:e.isCanMakeAction,onClick:s[9]||(s[9]=o=>e.doImport(e.selectedFile)),class:"mb-0.5",colors:"bg-green-500 text-white"},{default:t(()=>[a(u,{textColor:"text-white"},{default:t(()=>[c(l(e.$t("activate")),1)]),_:1})]),_:1},8,["disabled"])])):p("",!0),e.selectedZipFileName?(i(),b("div",Me,[a(v,{class:"w-60 mb-3",disabled:!0,value:e.selectedZipFileName,"onUpdate:value":s[11]||(s[11]=o=>e.selectedZipFileName=o)},{icon:t(()=>[a(r,{onClick:s[10]||(s[10]=o=>e.clearSelectedFile()),name:"cross"})]),_:1},8,["value"]),a(h,{disabled:e.isCanMakeAction,onClick:s[12]||(s[12]=o=>e.doImport(e.selectedZipFileName,1)),class:"mb-0.5",colors:"bg-green-500 text-white"},{default:t(()=>[a(u,{textColor:"text-white"},{default:t(()=>[c(l(e.$t("activate")),1)]),_:1})]),_:1},8,["disabled"])])):p("",!0),d("input",{type:"file",accept:".zip",ref:"importFile",style:{display:"none"},onChange:s[13]||(s[13]=o=>e.handleImport(o))},null,544),!e.selectedFile&&!e.selectedZipFileName?(i(),b("div",Ie,[a(h,{disabled:e.isCanMakeAction,onClick:e.importClicked,class:"mb-0.5",padding:"px-3 py-2"},{default:t(()=>[a(r,{name:"plus",class:"mx-0.5 font-semibold"}),a(u,{textColor:"text-white"},{default:t(()=>[c(l(e.$t("import_file")),1)]),_:1})]),_:1},8,["disabled","onClick"])])):p("",!0)]),e.logMessages?(i(),b("div",Se,[(i(!0),b(O,null,de(e.logMessages,o=>(i(),b("div",Ne,[o.status==="danger"?(i(),b("div",Le,[d("div",je,[a(r,{name:"cross",w:"20",h:"20",class:"me-4 p-0.5 inline-block align-middle font-semibold bg-red-500 border rounded-full text-white"})]),d("p",ze,l(o.message),1)])):p("",!0),o.status==="success"?(i(),b("div",Ze,[d("div",Ae,[a(r,{name:"check",w:"20",h:"20",class:"me-4 p-0.5 inline-block align-middle font-semibold bg-green-500 border rounded-full text-white"})]),d("p",qe,l(o.message),1)])):p("",!0)]))),256))])):p("",!0),d("div",Te,[a(u,{class:"text-base mb-3"},{default:t(()=>[c(l(e.$t("guide_link")),1)]),_:1}),d("div",Oe,[d("a",Ve,l(e.$t("how_to_make_project_setup")),1)]),d("div",We,[d("a",Re,l(e.$t("how_to_purchase_code")),1)])])])]),footer:t(()=>[]),_:1},512),a(P,{ref:"ps_confirm_dialog"},null,512),a(D,{ref:"ps_loading_circle_dialog"},null,512)],64)}var ls=G(ke,[["render",He]]);export{ls as P,ge as a};
